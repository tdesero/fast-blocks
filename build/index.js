(()=>{var e={694:(e,t,n)=>{"use strict";var o=n(925);function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,s){if(s!==o){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},556:(e,t,n)=>{e.exports=n(694)()},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},20:(e,t,n)=>{"use strict";var o=n(609),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,l=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var o,i={},c=null,u=null;for(o in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,o)&&!a.hasOwnProperty(o)&&(i[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===i[o]&&(i[o]=t[o]);return{$$typeof:r,type:e,key:c,ref:u,props:i,_owner:l.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},848:(e,t,n)=>{"use strict";e.exports=n(20)},609:e=>{"use strict";e.exports=window.React}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.blocks,t=window.wp.blockEditor;var o=n(848);const r=window.wp.components,i=window.wp.serverSideRender;var s=n.n(i);const l=window.wp.element,a=window.wp.i18n;function c(e=""){return function(e){return e.replace(/<[^>]*>?/gm,"")}(e).split("").length}const u=window.wp.primitives,d=(0,o.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,o.jsx)(u.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),p=({label:e,onSelect:n,onRemove:i,value:s})=>(0,o.jsx)(t.MediaUploadCheck,{children:(0,o.jsx)(t.MediaUpload,{onSelect:e=>{console.log(e),n({id:e.id,sizes:e.sizes,url:e.url,alt:e.alt,title:e.title,description:e.description,caption:e.caption})},allowedTypes:["image"],value:s,render:({open:t})=>(0,o.jsxs)(r.BaseControl,{children:[(0,o.jsx)(r.BaseControl,{label:e}),s&&s.url?(0,o.jsxs)("div",{className:"fbl_img-preview-box",children:[(0,o.jsx)("img",{onClick:t,src:s.url,className:"fbl_img-preview-box__img"}),(0,o.jsx)(r.Button,{className:"fbl_img-preview-box__btn",isPrimary:!0,isDestructive:!0,onClick:i,icon:d})]}):(0,o.jsx)(r.Button,{onClick:t,isPrimary:!0,children:(0,a.__)("Open Media Library")})]})})}),f=({label:e,onSelect:n,onRemove:i,value:s})=>(0,o.jsx)(t.MediaUploadCheck,{children:(0,o.jsx)(t.MediaUpload,{onSelect:e=>{console.log(e),n({filename:e.filename,id:e.id,sizes:e.sizes,url:e.url,alt:e.alt,title:e.title,description:e.description,caption:e.caption})},value:s,render:({open:t})=>(0,o.jsxs)(r.BaseControl,{children:[(0,o.jsx)(r.BaseControl,{label:e}),s?(0,o.jsxs)("div",{style:{display:"inline-flex"},children:[(0,o.jsx)(r.Button,{isSecondary:!0,isOutline:!0,onClick:t,children:s.filename}),(0,o.jsx)(r.Button,{isPrimary:!0,isDestructive:!0,onClick:i,icon:d})]}):(0,o.jsx)(r.Button,{onClick:t,isPrimary:!0,children:(0,a.__)("Open Media Library")})]})})}),h=window.wp.compose;var v,b,m,y=n(609),g=n(556),x=function(){return x=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},x.apply(this,arguments)},C={onActivate:g.func,onAddUndo:g.func,onBeforeAddUndo:g.func,onBeforeExecCommand:g.func,onBeforeGetContent:g.func,onBeforeRenderUI:g.func,onBeforeSetContent:g.func,onBeforePaste:g.func,onBlur:g.func,onChange:g.func,onClearUndos:g.func,onClick:g.func,onContextMenu:g.func,onCommentChange:g.func,onCompositionEnd:g.func,onCompositionStart:g.func,onCompositionUpdate:g.func,onCopy:g.func,onCut:g.func,onDblclick:g.func,onDeactivate:g.func,onDirty:g.func,onDrag:g.func,onDragDrop:g.func,onDragEnd:g.func,onDragGesture:g.func,onDragOver:g.func,onDrop:g.func,onExecCommand:g.func,onFocus:g.func,onFocusIn:g.func,onFocusOut:g.func,onGetContent:g.func,onHide:g.func,onInit:g.func,onInput:g.func,onKeyDown:g.func,onKeyPress:g.func,onKeyUp:g.func,onLoadContent:g.func,onMouseDown:g.func,onMouseEnter:g.func,onMouseLeave:g.func,onMouseMove:g.func,onMouseOut:g.func,onMouseOver:g.func,onMouseUp:g.func,onNodeChange:g.func,onObjectResizeStart:g.func,onObjectResized:g.func,onObjectSelected:g.func,onPaste:g.func,onPostProcess:g.func,onPostRender:g.func,onPreProcess:g.func,onProgressState:g.func,onRedo:g.func,onRemove:g.func,onReset:g.func,onSaveContent:g.func,onSelectionChange:g.func,onSetAttrib:g.func,onSetContent:g.func,onShow:g.func,onSubmit:g.func,onUndo:g.func,onVisualAid:g.func,onSkinLoadError:g.func,onThemeLoadError:g.func,onModelLoadError:g.func,onPluginLoadError:g.func,onIconsLoadError:g.func,onLanguageLoadError:g.func,onScriptsLoad:g.func,onScriptsLoadError:g.func},j=x({apiKey:g.string,licenseKey:g.string,id:g.string,inline:g.bool,init:g.object,initialValue:g.string,onEditorChange:g.func,value:g.string,tagName:g.string,tabIndex:g.number,cloudChannel:g.string,plugins:g.oneOfType([g.string,g.array]),toolbar:g.oneOfType([g.string,g.array]),disabled:g.bool,textareaName:g.string,tinymceScriptSrc:g.oneOfType([g.string,g.arrayOf(g.string),g.arrayOf(g.shape({src:g.string,async:g.bool,defer:g.bool}))]),rollback:g.oneOfType([g.number,g.oneOf([!1])]),scriptLoading:g.shape({async:g.bool,defer:g.bool,delay:g.number})},C),w=function(e){return"function"==typeof e},k=function(e){return e in C},S=function(e){return e.substr(2)},_=function(e,t,n,o,r){return function(t,n,o,r,i,s,l){var a=Object.keys(i).filter(k),c=Object.keys(s).filter(k),u=a.filter((function(e){return void 0===s[e]})),d=c.filter((function(e){return void 0===i[e]}));u.forEach((function(e){var t=S(e),n=l[t];o(t,n),delete l[t]})),d.forEach((function(o){var r=function(t,n){return function(o){var r;return null===(r=t(n))||void 0===r?void 0:r(o,e)}}(t,o),i=S(o);l[i]=r,n(i,r)}))}(r,e.on.bind(e),e.off.bind(e),0,t,n,o)},E=0,B=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++E+String(t)},O=function(e){return null!==e&&("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase())},P=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},T=function(e,t){void 0!==e&&(null!=e.mode&&"object"==typeof e.mode&&"function"==typeof e.mode.set?e.mode.set(t):e.setMode(t))},L=function(){return L=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},L.apply(this,arguments)},I=function(e,t,n){var o,r,i=e.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=t.id,i.src=t.src,i.async=null!==(o=t.async)&&void 0!==o&&o,i.defer=null!==(r=t.defer)&&void 0!==r&&r;var s=function(){i.removeEventListener("load",s),i.removeEventListener("error",l),n(t.src)},l=function(e){i.removeEventListener("load",s),i.removeEventListener("error",l),n(t.src,e)};i.addEventListener("load",s),i.addEventListener("error",l),e.head&&e.head.appendChild(i)},N=(v=[],b=function(e){var t=v.find((function(t){return t.getDocument()===e}));return void 0===t&&(t=function(e){var t={},n=function(e,n){var o=t[e];o.done=!0,o.error=n;for(var r=0,i=o.handlers;r<i.length;r++)(0,i[r])(e,n);o.handlers=[]};return{loadScripts:function(o,r,i){var s=function(e){return void 0!==i?i(e):console.error(e)};if(0!==o.length)for(var l=0,a=!1,c=function(e,t){a||(t?(a=!0,s(t)):++l===o.length&&r())},u=0,d=o;u<d.length;u++){var p=d[u],f=t[p.src];if(f)f.done?c(p.src,f.error):f.handlers.push(c);else{var h=B("tiny-");t[p.src]={id:h,src:p.src,done:!1,error:null,handlers:[c]},I(e,L({id:h},p),n)}}else s(new Error("At least one script must be provided"))},deleteScripts:function(){for(var n,o=0,r=Object.values(t);o<r.length;o++){var i=r[o],s=e.getElementById(i.id);null!=s&&"SCRIPT"===s.tagName&&(null===(n=s.parentNode)||void 0===n||n.removeChild(s))}t={}},getDocument:function(){return e}}}(e),v.push(t)),t},{loadList:function(e,t,n,o,r){var i=function(){return b(e).loadScripts(t,o,r)};n>0?setTimeout(i,n):i()},reinitialize:function(){for(var e=v.pop();null!=e;e=v.pop())e.deleteScripts()}}),A=function(e){var t=e;return t&&t.tinymce?t.tinymce:null},R=(m=function(e,t){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},m(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),F=function(){return F=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},F.apply(this,arguments)},D=function(e){function t(t){var n,o,r,i=e.call(this,t)||this;return i.rollbackTimer=void 0,i.valueCursor=void 0,i.rollbackChange=function(){var e=i.editor,t=i.props.value;e&&t&&t!==i.currentContent&&e.undoManager.ignore((function(){if(e.setContent(t),i.valueCursor&&(!i.inline||e.hasFocus()))try{e.selection.moveToBookmark(i.valueCursor)}catch(e){}})),i.rollbackTimer=void 0},i.handleBeforeInput=function(e){if(void 0!==i.props.value&&i.props.value===i.currentContent&&i.editor&&(!i.inline||i.editor.hasFocus()))try{i.valueCursor=i.editor.selection.getBookmark(3)}catch(e){}},i.handleBeforeInputSpecial=function(e){"Enter"!==e.key&&"Backspace"!==e.key&&"Delete"!==e.key||i.handleBeforeInput(e)},i.handleEditorChange=function(e){var t=i.editor;if(t&&t.initialized){var n=t.getContent();void 0!==i.props.value&&i.props.value!==n&&!1!==i.props.rollback&&(i.rollbackTimer||(i.rollbackTimer=window.setTimeout(i.rollbackChange,"number"==typeof i.props.rollback?i.props.rollback:200))),n!==i.currentContent&&(i.currentContent=n,w(i.props.onEditorChange)&&i.props.onEditorChange(n,t))}},i.handleEditorChangeSpecial=function(e){"Backspace"!==e.key&&"Delete"!==e.key||i.handleEditorChange(e)},i.initialise=function(e){var t,n,o;void 0===e&&(e=0);var r=i.elementRef.current;if(r)if(function(e){if(!("isConnected"in Node.prototype)){for(var t=e,n=e.parentNode;null!=n;)n=(t=n).parentNode;return t===e.ownerDocument}return e.isConnected}(r)){var s=A(i.view);if(!s)throw new Error("tinymce should have been loaded into global scope");var l,a,c=F(F(F(F({},i.props.init),{selector:void 0,target:r,readonly:i.props.disabled,inline:i.inline,plugins:(l=null===(t=i.props.init)||void 0===t?void 0:t.plugins,a=i.props.plugins,P(l).concat(P(a))),toolbar:null!==(n=i.props.toolbar)&&void 0!==n?n:null===(o=i.props.init)||void 0===o?void 0:o.toolbar}),i.props.licenseKey?{license_key:i.props.licenseKey}:{}),{setup:function(e){i.editor=e,i.bindHandlers({}),i.inline&&!O(r)&&e.once("PostRender",(function(t){e.setContent(i.getInitialValue(),{no_events:!0})})),i.props.init&&w(i.props.init.setup)&&i.props.init.setup(e)},init_instance_callback:function(e){var t,n,o=i.getInitialValue();i.currentContent=null!==(t=i.currentContent)&&void 0!==t?t:e.getContent(),i.currentContent!==o&&(i.currentContent=o,e.setContent(o),e.undoManager.clear(),e.undoManager.add(),e.setDirty(!1));var r=null!==(n=i.props.disabled)&&void 0!==n&&n;T(i.editor,r?"readonly":"design"),i.props.init&&w(i.props.init.init_instance_callback)&&i.props.init.init_instance_callback(e)}});i.inline||(r.style.visibility=""),O(r)&&(r.value=i.getInitialValue()),s.init(c)}else if(0===e)setTimeout((function(){return i.initialise(1)}),1);else{if(!(e<100))throw new Error("tinymce can only be initialised when in a document");setTimeout((function(){return i.initialise(e+1)}),100)}},i.id=i.props.id||B("tiny-react"),i.elementRef=y.createRef(),i.inline=null!==(r=null!==(n=i.props.inline)&&void 0!==n?n:null===(o=i.props.init)||void 0===o?void 0:o.inline)&&void 0!==r&&r,i.boundHandlers={},i}return R(t,e),Object.defineProperty(t.prototype,"view",{get:function(){var e,t;return null!==(t=null===(e=this.elementRef.current)||void 0===e?void 0:e.ownerDocument.defaultView)&&void 0!==t?t:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(e){var t,n,o=this;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(e),this.editor.initialized)){if(this.currentContent=null!==(t=this.currentContent)&&void 0!==t?t:this.editor.getContent(),"string"==typeof this.props.initialValue&&this.props.initialValue!==e.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if("string"==typeof this.props.value&&this.props.value!==this.currentContent){var r=this.editor;r.undoManager.transact((function(){var e;if(!o.inline||r.hasFocus())try{e=r.selection.getBookmark(3)}catch(e){}var t=o.valueCursor;if(r.setContent(o.props.value),!o.inline||r.hasFocus())for(var n=0,i=[e,t];n<i.length;n++){var s=i[n];if(s)try{r.selection.moveToBookmark(s),o.valueCursor=s;break}catch(e){}}}))}if(this.props.disabled!==e.disabled){var i=null!==(n=this.props.disabled)&&void 0!==n&&n;T(this.editor,i?"readonly":"design")}}},t.prototype.componentDidMount=function(){var e,t,n,o,r,i=this;null!==A(this.view)?this.initialise():Array.isArray(this.props.tinymceScriptSrc)&&0===this.props.tinymceScriptSrc.length?null===(t=(e=this.props).onScriptsLoadError)||void 0===t||t.call(e,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array.")):(null===(n=this.elementRef.current)||void 0===n?void 0:n.ownerDocument)&&N.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),null!==(r=null===(o=this.props.scriptLoading)||void 0===o?void 0:o.delay)&&void 0!==r?r:0,(function(){var e,t;null===(t=(e=i.props).onScriptsLoad)||void 0===t||t.call(e),i.initialise()}),(function(e){var t,n;null===(n=(t=i.props).onScriptsLoadError)||void 0===n||n.call(t,e)}))},t.prototype.componentWillUnmount=function(){var e=this,t=this.editor;t&&(t.off(this.changeEvents(),this.handleEditorChange),t.off(this.beforeInputEvent(),this.handleBeforeInput),t.off("keypress",this.handleEditorChangeSpecial),t.off("keydown",this.handleBeforeInputSpecial),t.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach((function(n){t.off(n,e.boundHandlers[n])})),this.boundHandlers={},t.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.changeEvents=function(){var e,t,n;return(null===(n=null===(t=null===(e=A(this.view))||void 0===e?void 0:e.Env)||void 0===t?void 0:t.browser)||void 0===n?void 0:n.isIE())?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},t.prototype.beforeInputEvent=function(){return window.InputEvent&&"function"==typeof InputEvent.prototype.getTargetRanges?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var e=this.props.tagName,t=void 0===e?"div":e;return y.createElement(t,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.renderIframe=function(){return y.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.getScriptSources=function(){var e,t,n=null===(e=this.props.scriptLoading)||void 0===e?void 0:e.async,o=null===(t=this.props.scriptLoading)||void 0===t?void 0:t.defer;if(void 0!==this.props.tinymceScriptSrc)return"string"==typeof this.props.tinymceScriptSrc?[{src:this.props.tinymceScriptSrc,async:n,defer:o}]:this.props.tinymceScriptSrc.map((function(e){return"string"==typeof e?{src:e,async:n,defer:o}:e}));var r=this.props.cloudChannel,i=this.props.apiKey?this.props.apiKey:"no-api-key";return[{src:"https://cdn.tiny.cloud/1/".concat(i,"/tinymce/").concat(r,"/tinymce.min.js"),async:n,defer:o}]},t.prototype.getInitialValue=function(){return"string"==typeof this.props.initialValue?this.props.initialValue:"string"==typeof this.props.value?this.props.value:""},t.prototype.bindHandlers=function(e){var t=this;if(void 0!==this.editor){_(this.editor,e,this.props,this.boundHandlers,(function(e){return t.props[e]}));var n=function(e){return void 0!==e.onEditorChange||void 0!==e.value},o=n(e),r=n(this.props);!o&&r?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):o&&!r&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=j,t.defaultProps={cloudChannel:"7"},t}(y.Component);const M=window.wp.data;window.wp.tinymce;const V={checkbox:function({value:e,label:t,setFieldAttributes:n}){return(0,o.jsx)(r.CheckboxControl,{label:t,onChange:n,checked:e})},toggle:function({value:e,label:t,setFieldAttributes:n}){return(0,o.jsx)(r.ToggleControl,{label:t,onChange:n,checked:e})},text:function({value:e,label:t,setFieldAttributes:n,field:i}){const[s,u]=(0,l.useState)(c(e));(0,l.useEffect)((()=>{u(c(e))}));const d=i.charLimit?`${(0,a.__)("Characters")}: ${s} / ${i.charLimit}`:void 0,p=!(i.charLimit&&s>i.charLimit);return(0,o.jsx)(r.TextControl,{className:p?"":"components-base-control--error",label:t,help:d,value:e,onChange:n})},email:function({value:e,label:t,setFieldAttributes:n}){const[i,s]=(0,l.useState)(!0);return(0,o.jsx)(r.TextControl,{type:"email",className:i?"":"components-base-control--error",label:t,value:e,onChange:n,onFocus:e=>{e.target.reportValidity()},onBlur:e=>{const t=e.target.checkValidity();s(t)}})},textarea:function({value:e,label:t,setFieldAttributes:n,field:i}){const[s,u]=(0,l.useState)(c(e));(0,l.useEffect)((()=>{u(c(e))}));const d=i.charLimit?`${(0,a.__)("Characters")}: ${s} / ${i.charLimit}`:void 0,p=!(i.charLimit&&s>i.charLimit);return(0,o.jsx)(r.TextareaControl,{className:p?"":"components-base-control--error",label:t,help:d,value:e,onChange:n})},number:function({value:e,label:t,setFieldAttributes:n}){return(0,o.jsx)(r.TextControl,{type:"number",label:t,value:e,onChange:n})},range:function({value:e,field:t,label:n,setFieldAttributes:i}){return(0,o.jsx)(r.RangeControl,{label:n,value:e,onChange:i,step:t.step,min:t.min,max:t.max})},select:function({value:e,field:t,label:n,setFieldAttributes:i}){return(0,o.jsx)(r.SelectControl,{label:n,value:e,onChange:i,options:t.options})},image:function({label:e,value:t,setFieldAttributes:n,removeFieldAttributes:r}){return(0,o.jsx)(p,{onSelect:n,onRemove:r,value:t,label:e})},file:function({label:e,value:t,setFieldAttributes:n,removeFieldAttributes:r}){return(0,o.jsx)(f,{onSelect:n,onRemove:r,value:t,label:e})},richText:function({value:e,label:n,setFieldAttributes:i,field:s}){const[u,d]=(0,l.useState)(c(e));(0,l.useEffect)((()=>{d(c(e))}));const p=s.charLimit?`${(0,a.__)("Characters")}: ${u} / ${s.charLimit}`:void 0,f=!(s.charLimit&&u>s.charLimit);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.BaseControl,{label:n,className:f?"":"components-base-control--error",children:(0,o.jsx)(t.RichText,{className:"fbl_rich-text",value:e,allowedFormats:s.allowedFormats,onChange:i,placeholder:(0,a.__)("Add text…"),inlineToolbar:!0})}),s.charLimit&&(0,o.jsx)("p",{style:{fontStyle:"normal",color:"rgb(117, 117, 117)",fontSize:12},children:p})]})},url:function({value:e,label:n,setFieldAttributes:i}){return(0,o.jsxs)(r.BaseControl,{className:"fbl_url-input",children:[(0,o.jsx)("label",{className:"fbl_url-input__label",children:n}),(0,o.jsx)(t.URLInputButton,{url:e,onChange:i}),(0,o.jsx)("small",{className:"fbl_url-input__url",children:e})]})},date:function({value:e,label:t,setFieldAttributes:n}){const i=(0,h.withState)({isVisible:!1})((({isVisible:t,setState:n,children:i})=>(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)(r.Button,{isSecondary:!0,onClick:t?null:()=>{n((()=>({isVisible:!0})))},children:e?new Date(e).toLocaleString():(0,a.__)("Date")}),t&&(0,o.jsx)(r.Popover,{onClose:()=>{n((()=>({isVisible:!1})))},position:"bottom left",children:i})]})));return(0,o.jsxs)(r.BaseControl,{className:"fbl_url-input",children:[(0,o.jsx)(r.BaseControl,{className:"fbl_url-input__label",label:t}),(0,o.jsx)(i,{children:(0,o.jsx)("div",{style:{padding:10},children:(0,o.jsx)(r.DateTimePicker,{currentDate:e,onChange:e=>{e||(e=""),n(e)}})})})]})},classicEditor:({value:e,label:t,setFieldAttributes:n,field:i})=>{const s=(0,M.select)("core/block-editor").getSettings().colors,u=[],[d,p]=(0,l.useState)(c(e));s.forEach((e=>{u.push(e.color.substring(1)),u.push(e.slug)})),(0,l.useEffect)((()=>{p(c(e))}));const f=i.charLimit?`${(0,a.__)("Characters")}: ${d} / ${i.charLimit}`:void 0,h=!(i.charLimit&&d>i.charLimit);return(0,o.jsxs)(r.BaseControl,{className:h?"":"components-base-control--error",children:[(0,o.jsx)(r.BaseControl,{label:t}),(0,o.jsx)(D,{onEditorChange:e=>{n(e)},value:e,plugins:"lists textcolor colorpicker link",init:{height:300,menubar:!1,branding:!1,textcolor_map:u,toolbar:"undo redo formatselect bold italic forecolor backcolor alignleft aligncenter alignright alignjustify bullist numlist outdent indent link unlink removeformat help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}),i.charLimit&&(0,o.jsx)("p",{style:{fontStyle:"normal",color:"rgb(117, 117, 117)",fontSize:12},children:f})]})},postTypeEntry:function({value:e,label:t,setFieldAttributes:n,field:i}){const s=i.postType,a=(0,M.useSelect)((e=>e("core").getEntityRecords("postType",s,{per_page:-1}))),[c,u]=(0,l.useState)([]);return(0,l.useEffect)((()=>{if(a){const e=a.slice().map((e=>({value:e.id,label:e.title.rendered})));u(e)}}),[a]),(0,o.jsx)(r.ComboboxControl,{label:t,value:e,onChange:e=>{n(e||-1)},options:c})}},$=({children:e,width:t})=>{const n=100*parseFloat(t);return(0,o.jsx)("div",{style:{width:`${n}%`},children:e})};function H({editProps:e,fieldName:t,field:n,subFieldName:r,subField:i,indexKey:s}){const{attributes:l,setAttributes:a}=e,c=e=>{const n=l[t].slice(0,s),o=l[t].slice(s+1);a({[t]:[...n,{...l[t][s],[r]:e},...o]})},u=V[i.input];return(0,o.jsx)(u,{setFieldAttributes:c,removeFieldAttributes:()=>{c(void 0)},field:i,label:i.label,value:l[t][s][r]})}const U=(0,o.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,o.jsx)(u.Path,{d:"M12 3.9 6.5 9.5l1 1 3.8-3.7V20h1.5V6.8l3.7 3.7 1-1z"})}),z=(0,o.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,o.jsx)(u.Path,{d:"m16.5 13.5-3.7 3.7V4h-1.5v13.2l-3.8-3.7-1 1 5.5 5.6 5.5-5.6z"})});function K({field:e,setAttributes:t,fieldName:n,attributes:i,editProps:s}){const l=e=>e===i[n].length-1,c=e=>0===e;return(0,o.jsxs)(r.BaseControl,{className:"fbl_repeater-inputs",children:[(0,o.jsx)(r.BaseControl,{label:e.label}),(0,o.jsx)(r.Panel,{children:i[n].map(((u,p)=>(0,o.jsxs)(r.PanelBody,{title:e.single?`${e.single} ${p+1}`:`Repeater ${(0,a.__)("Item")} ${p+1}`,initialOpen:!1,buttonProps:{style:{padding:"16px"}},children:[(0,o.jsxs)("div",{className:"fbl_repeater-btns",children:[(0,o.jsx)(r.Button,{onClick:()=>{(e=>{if(c(e))return;const o=[...i[n]],r=o[e];o[e]=o[e-1],o[e-1]=r,t({[n]:o})})(p)},disabled:c(p),icon:U}),(0,o.jsx)(r.Button,{onClick:()=>{(e=>{if(l(e))return;const o=[...i[n]],r=o[e];o[e]=o[e+1],o[e+1]=r,t({[n]:o})})(p)},disabled:l(p),icon:z}),(0,o.jsx)(r.Button,{onClick:()=>{(e=>{const o=[...i[n]];o.splice(e,1),t({[n]:o})})(p)},icon:d})]}),Object.entries(u).map((([t])=>{if(e.query[t]){const r={editProps:s,fieldName:n,field:e,subFieldName:t,subField:e.query[t],indexKey:p};return(0,o.jsx)(H,{...r})}}))]},u.fastBlockId?`${n}_${u.fastBlockId}`:`${n}_${p}`)))}),(!e.limit||e.limit>i[n].length)&&(0,o.jsx)(r.Button,{onClick:()=>{const o={};Object.entries(e.query).forEach((([e,t])=>{o[e]=t.default})),o.fastBlockId=(new Date).valueOf(),console.log(o),t({[n]:[...i[n],o]})},style:{width:"100%",justifyContent:"center"},isSecondary:!0,children:"+"})]})}function G({editProps:e,fieldName:n,field:i}){const{attributes:s,setAttributes:l}=e,a=e=>{l({[n]:e})},c=()=>{a(void 0)};if("repeater"===i.input){const t={field:i,setAttributes:l,fieldName:n,attributes:s,editProps:e};return(0,o.jsx)(K,{...t})}return(0,o.jsx)(o.Fragment,{children:(()=>{const e=V[i.input],l=()=>(0,o.jsx)(e,{setFieldAttributes:a,removeFieldAttributes:c,field:i,label:i.label,value:s[n]});if(void 0===e)return i.input&&console.error(i.input+" Input does not exist inside field "+n),null;const u=i.width||1;return"inspector"===i.location?(0,o.jsx)(t.InspectorControls,{children:(0,o.jsx)(r.PanelBody,{children:l()})}):(0,o.jsx)($,{width:u,children:l()})})()})}const W=(0,o.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,o.jsx)(u.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})});function q({title:e,fields:t,editProps:n,isSelected:i}){const[s,a]=(0,l.useState)(!1),c=()=>{a((()=>!1))},u=i?" is-selected":"";return(0,o.jsxs)("div",{className:"fbl_edit-btn-overlay"+u,children:[Object.entries(t).filter((([e,t])=>"inspector"===t.location)).map((([e,t])=>{const r={editProps:n,fieldName:e,field:t};return(0,o.jsx)(G,{...r})})),(0,o.jsx)(r.Button,{isPrimary:!0,icon:W,onClick:()=>{a((()=>!0))}}),s&&(0,o.jsxs)(r.Modal,{title:"Block: "+e,onRequestClose:c,style:{width:600},shouldCloseOnClickOutside:!1,children:[Object.entries(t).filter((([e,t])=>"inspector"!==t.location)).map((([e,t])=>{const r={editProps:n,fieldName:e,field:t};return(0,o.jsx)(G,{...r})})),(0,o.jsx)("div",{style:{textAlign:"right",marginTop:"2rem"},children:(0,o.jsx)(r.Button,{isPrimary:!0,onClick:c,children:"Okay"})})]})]})}const Z=({children:e,fields:n})=>({attributes:r})=>e?(0,o.jsx)(t.InnerBlocks.Content,{}):(0,o.jsx)("div",{children:Object.entries(n).map((([e,n])=>{switch(n.input){case"text":case"textarea":if("string"==typeof n.selector){const t=n.selector;return(0,o.jsx)(t,{children:r[e]})}return(0,o.jsx)("p",{children:r[e]});case"image":return(0,o.jsx)("img",{src:"object"==typeof r[e]&&r[e].url,alt:"object"==typeof r[e]&&r[e].alt});case"richText":return(0,o.jsx)(t.RichText.Content,{tagName:"p",value:r[e]});default:return null}}))}),Y=({attributes:e,children:t,fields:n,settings:o})=>[{attributes:e,...o,save:Z({children:t,fields:n}),apiVersion:1}];Object.values(fastBlockBlocks).forEach((n=>{!function(n){const{name:i,settings:a,children:c,allowTransformFrom:u}=n,d=n.fields||[],p={};for(const[e,t]of Object.entries(d)){const n={};n.type=t.type,n.default=t.default,p[e]=n}const f=function({settings:e,name:n,children:i,fields:a,editWidth:c,editView:u,childrenLimit:d,preview:p}){return f=>{const{attributes:h,isSelected:v,clientId:b}=f,[m,y]=(0,l.useState)(0),g=(0,t.useBlockProps)({style:{flexBasis:100*c+"%"}}),x=e&&e.title?e.title:n,C="popover"===u||"inspector"===u,j=(0,M.useSelect)((e=>e("core/block-editor").getBlock(b).innerBlocks)).length,w=(!d||j<d)&&t.InnerBlocks.ButtonBlockAppender;function k(e){return Object.entries(a).map((([t,n])=>{const r={editProps:e,fieldName:t,field:n};return(0,o.jsx)(G,{...r})}))}return(0,o.jsx)("div",{...g,children:(0,o.jsx)("div",{className:"fbl_editor-block",style:{minHeight:m},onMouseDown:e=>{if(v)return;e.currentTarget.style.minHeight=null;const t=e.currentTarget.offsetHeight;e.currentTarget.style.minHeight=t+"px",y(t)},onBlur:()=>{y(0)},children:v&&!C||i||!1===p?(0,o.jsxs)(r.Card,{className:"fbl_card",size:"small",children:[(0,o.jsxs)(r.CardHeader,{className:"fbl_block-title",children:["Block: ",x]}),(0,o.jsxs)(r.CardBody,{style:{padding:"16px 14px"},children:[k(f),i&&(0,o.jsx)("div",{style:{border:"1px dashed #ddd",padding:0,borderRadius:2},children:(0,o.jsx)(t.InnerBlocks,{allowedBlocks:Array.isArray(i)?i:void 0,orientation:"horizontal",renderAppender:w})})]})]}):(0,o.jsxs)("div",{style:{border:"1px dashed #ddd",padding:0,minHeight:50},children:["popover"===u&&(0,o.jsx)(q,{title:x,fields:a,editProps:f,isSelected:v}),(0,o.jsx)("div",{className:"fbl_server-side-render",children:(0,o.jsx)(s(),{block:n,attributes:{...h},httpMethod:"POST"})}),v&&"inspector"===u&&(0,o.jsx)(t.InspectorControls,{children:(0,o.jsx)(r.PanelBody,{children:k(f)})})]})})})}}({fields:d,...n}),h=function({children:e,fields:n}){return({attributes:r,className:i})=>{const s=t.useBlockProps.save({className:i});return e?(0,o.jsx)(t.InnerBlocks.Content,{}):(0,o.jsx)("div",{...s,children:Object.entries(n).map((([e,n])=>{switch(n.input){case"text":case"textarea":if("string"==typeof n.selector){const t=n.selector;return(0,o.jsx)(t,{children:r[e]})}return(0,o.jsx)("p",{children:r[e]});case"image":return(0,o.jsx)("img",{src:"object"==typeof r[e]&&r[e].url,alt:"object"==typeof r[e]&&r[e].alt});case"richText":case"classicEditor":return(0,o.jsx)(t.RichText.Content,{value:r[e]});default:return null}}))})}}({children:c,fields:d});u&&(a.transforms={from:[{type:"block",blocks:u,transform:(t,n)=>(0,e.createBlock)(i,t,n)}]});const v={apiVersion:2,edit:f,save:h,title:i,...a,attributes:p,deprecated:Y({attributes:p,children:c,fields:d,settings:a})};(0,e.registerBlockType)(i,v)}(n)}))})()})();