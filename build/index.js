!function(e){var t={};function l(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=e,l.c=t,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=7)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.blockEditor},function(e,t){e.exports=window.wp.blocks},function(e,t){e.exports=window.wp.serverSideRender},function(e,t){e.exports=window.wp.compose},function(e,t,l){"use strict";l.r(t);var n=l(4),r=l(0),a=l(3),c=l(1),i=l(5),o=l.n(i),s=l(2),u=l(6),b=({label:e,onSelect:t,onRemove:l,value:n})=>Object(r.createElement)(a.MediaUploadCheck,null,Object(r.createElement)(a.MediaUpload,{onSelect:e=>{t({id:e.id,sizes:e.sizes,url:e.url,alt:e.alt})},allowedTypes:["image"],value:n,render:({open:t})=>Object(r.createElement)(c.BaseControl,null,Object(r.createElement)(c.BaseControl,{label:e}),n&&n.url?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("img",{onClick:t,src:n.url,style:{width:"150px",height:"150px",objectFit:"cover",marginRight:"10px",background:"white"}}),Object(r.createElement)(c.Button,{onClick:l,isSecondary:!0},Object(s.__)("Remove image"))):Object(r.createElement)(c.Button,{onClick:t,isPrimary:!0},Object(s.__)("Open Media Library")))})),d={checkbox:({value:e,label:t,setFieldAttributes:l})=>Object(r.createElement)(c.CheckboxControl,{label:t,onChange:l,checked:e}),toggle:({value:e,label:t,setFieldAttributes:l})=>Object(r.createElement)(c.ToggleControl,{label:t,onChange:l,checked:e}),text:({value:e,label:t,setFieldAttributes:l})=>Object(r.createElement)(c.TextControl,{label:t,value:e,onChange:l}),email:({value:e,label:t,setFieldAttributes:l})=>{const[n,a]=Object(r.useState)(!0);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(c.TextControl,{type:"email",label:t,value:e,onChange:l,onBlur:e=>{const t=e.target.value;/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(String(t).toLowerCase())||""===t?a(!0):(a(!1),l(""))}}),!n&&Object(r.createElement)(c.Notice,{status:"error",isSmall:!0,isDismissible:!1},Object(s.__)("Invalid email address.")))},textarea:({value:e,label:t,setFieldAttributes:l})=>Object(r.createElement)(c.TextareaControl,{label:t,value:e,onChange:l}),number:({value:e,label:t,setFieldAttributes:l})=>Object(r.createElement)(c.TextControl,{type:"number",label:t,value:e,onChange:l}),range:({value:e,field:t,label:l,setFieldAttributes:n})=>Object(r.createElement)(c.RangeControl,{label:l,value:e,onChange:n,min:t.min,max:t.max}),select:({value:e,field:t,label:l,setFieldAttributes:n})=>Object(r.createElement)(c.SelectControl,{label:l,value:e,onChange:n,options:t.options}),image:({label:e,value:t,setFieldAttributes:l,removeFieldAttributes:n})=>Object(r.createElement)(b,{onSelect:l,onRemove:n,value:t,label:e}),richText:({value:e,label:t,setFieldAttributes:l})=>Object(r.createElement)(c.BaseControl,null,Object(r.createElement)(c.BaseControl,{label:t}),Object(r.createElement)(a.RichText,{className:"fbl_rich-text",value:e,onChange:l,placeholder:Object(s.__)("Add textâ€¦"),inlineToolbar:!0})),url:({value:e,label:t,setFieldAttributes:l})=>Object(r.createElement)(c.BaseControl,{className:"fbl_url-input"},Object(r.createElement)(c.BaseControl,{className:"fbl_url-input__label",label:t}),Object(r.createElement)(a.URLInputButton,{url:e,onChange:l}),Object(r.createElement)("small",{className:"fbl_url-input__url"},e)),date:({value:e,label:t,setFieldAttributes:l})=>{const n=Object(u.withState)({isVisible:!1})(({isVisible:t,setState:l,children:n})=>Object(r.createElement)("div",{style:{position:"relative"}},Object(r.createElement)(c.Button,{isSecondary:!0,onClick:t?null:()=>{l(()=>({isVisible:!0}))}},e?new Date(e).toLocaleString():Object(s.__)("Date")),t&&Object(r.createElement)(c.Popover,{onClose:()=>{l(()=>({isVisible:!1}))},position:"bottom left"},n)));return Object(r.createElement)(c.BaseControl,{className:"fbl_url-input"},Object(r.createElement)(c.BaseControl,{className:"fbl_url-input__label",label:t}),Object(r.createElement)(n,null,Object(r.createElement)("div",{style:{padding:10}},Object(r.createElement)(c.DateTimePicker,{currentDate:e,onChange:l}))))}},m=({children:e,width:t})=>{const l=100*parseFloat(t);return Object(r.createElement)("div",{style:{width:l+"%"}},e)};function p(e,t,l,i){const u={};for(const[e,l]of Object.entries(t)){const t={};t.type=l.type,t.default=l.default,u[e]=t}const b={edit:function({options:e,name:t,children:l,fields:n}){return i=>{const{attributes:u,isSelected:b}=i,[p,j]=Object(r.useState)(0),O=e&&e.title?e.title:t;return Object(r.createElement)("div",{className:"fbl_editor-block",style:{minHeight:p},onMouseDown:e=>{if(b)return;e.currentTarget.style.minHeight=null;const t=e.currentTarget.offsetHeight;e.currentTarget.style.minHeight=t+"px",j(t)}},b||l?Object(r.createElement)(c.Card,{className:"fbl_card"},Object(r.createElement)(c.CardHeader,{className:"fbl_block-title"},"Block: ",O),Object(r.createElement)(c.CardBody,{style:{padding:"16px 14px"}},Object.entries(n).map(([e,t])=>function(e,t,l){const{attributes:n,setAttributes:a}=e,i=e=>{a({[t]:e})},o=()=>{i(void 0)};if("repeater"!==l.input){const e=d[l.input];if(void 0===e)return void console.error(l.input+" Input does not exist");const a=l.width||1;return Object(r.createElement)(m,{width:a},Object(r.createElement)(e,{setFieldAttributes:i,removeFieldAttributes:o,field:l,label:l.label,value:n[t]}))}if("repeater"===l.input){const i=()=>{const e={};Object.entries(l.query).forEach(([t,l])=>{e[t]=l.default}),e.fastBlockId=(new Date).valueOf(),console.log(e),a({[t]:[...n[t],e]})},o=e=>{const l=[...n[t]];l.splice(e,1),a({[t]:l})},u=e=>e===n[t].length-1,b=e=>0===e,m=e=>{if(b(e))return;const l=[...n[t]],r=l[e];l[e]=l[e-1],l[e-1]=r,a({[t]:l})},p=e=>{if(u(e))return;const l=[...n[t]],r=l[e];l[e]=l[e+1],l[e+1]=r,a({[t]:l})};return Object(r.createElement)(c.BaseControl,{className:"fbl_repeater-inputs"},Object(r.createElement)(c.BaseControl,{label:l.label}),Object(r.createElement)(c.Panel,null,n[t].map((n,a)=>Object(r.createElement)(c.PanelBody,{key:n.fastBlockId?`${t}_${n.fastBlockId}`:`${t}_${a}`,title:l.single?`${l.single} ${a+1}`:`Repeater ${Object(s.__)("Item")} ${a+1}`,initialOpen:!1,buttonProps:{style:{padding:"16px"}}},Object(r.createElement)(c.PanelRow,null,Object(r.createElement)(c.ButtonGroup,null,Object(r.createElement)(c.Button,{onClick:()=>{m(a)},isSmall:!0,isSecondary:!0,disabled:b(a)},Object(s.__)("Move up")),Object(r.createElement)(c.Button,{onClick:()=>{p(a)},isSmall:!0,isSecondary:!0,disabled:u(a)},Object(s.__)("Move down")),Object(r.createElement)(c.Button,{onClick:()=>{o(a)},isSmall:!0,isDestructive:!0},Object(s.__)("Remove item")))),Object.entries(n).map(([n])=>{if(l.query[n])return function({props:e,fieldName:t,field:l,subFieldName:n,subField:a,key:c}){const{attributes:i,setAttributes:o}=e,s=e=>{const l=i[t].slice(0,c),r=i[t].slice(c+1);o({[t]:[...l,{...i[t][c],[n]:e},...r]})},u=d[a.input];return Object(r.createElement)(u,{setFieldAttributes:s,removeFieldAttributes:()=>{s(void 0)},field:a,label:a.label,value:i[t][c][n]})}({props:e,fieldName:t,field:l,subFieldName:n,subField:l.query[n],key:a})})))),Object(r.createElement)(c.Button,{onClick:i,style:{width:"100%",justifyContent:"center"},isSecondary:!0},"+"))}}(i,e,t)),l&&Object(r.createElement)("div",{style:{border:"1px dashed grey",padding:"10px"}},Object(r.createElement)(a.InnerBlocks,{allowedBlocks:l,orientation:"horizontal",renderAppender:a.InnerBlocks.ButtonBlockAppender})))):Object(r.createElement)(o.a,{block:t,attributes:{...u},httpMethod:"POST"}))}}({options:l,name:e,children:i,fields:t}),save:function({children:e,fields:t}){return({attributes:l})=>e?Object(r.createElement)(a.InnerBlocks.Content,null):Object(r.createElement)("div",null,Object.entries(t).map(([e,t])=>{switch(t.input){case"text":case"textarea":if("string"==typeof t.selector){const n=t.selector;return Object(r.createElement)(n,null,l[e])}return Object(r.createElement)("p",null,l[e]);case"image":return Object(r.createElement)("img",{src:"object"==typeof l[e]&&l[e].url,alt:"object"==typeof l[e]&&l[e].alt});case"richText":return Object(r.createElement)(a.RichText.Content,{tagName:"p",value:l[e]});default:return null}}))}({children:i,fields:t}),title:e,...l,attributes:u};Object(n.registerBlockType)(e,b)}Object.values(fastBlockBlocks).forEach(e=>{p(e.name,e.fields,e.settings,e.children)})}]);