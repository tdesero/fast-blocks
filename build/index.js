(()=>{var e={694:(e,t,n)=>{"use strict";var r=n(925);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},556:(e,t,n)=>{e.exports=n(694)()},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},20:(e,t,n)=>{"use strict";var r=n(609),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!s.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:l.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},848:(e,t,n)=>{"use strict";e.exports=n(20)},609:e=>{"use strict";e.exports=window.React}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.blocks,t=window.wp.blockEditor;var r=n(848),o=n(609),i=n.n(o);const a=window.wp.components,l=window.wp.serverSideRender;var s=n.n(l);const c=window.wp.element,u=window.wp.i18n;function d(e=""){return function(e){return e.replace(/<[^>]*>?/gm,"")}(e).split("").length}const f=window.wp.primitives,p=(0,r.jsx)(f.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)(f.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})}),h=(0,r.jsx)(f.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(f.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),v=({label:e,onSelect:n,onRemove:r,value:i,field:l})=>(0,o.createElement)(t.MediaUploadCheck,null,(0,o.createElement)(t.MediaUpload,{onSelect:e=>{console.log(e),n({id:e.id,sizes:e.sizes,url:e.url,alt:e.alt,title:e.title,description:e.description,caption:e.caption,width:e.width,height:e.height,...l.focalPointPicker?{focalPoint:{x:.5,y:.5}}:{}})},allowedTypes:["image"],value:i,render:({open:t})=>(0,o.createElement)(a.BaseControl,{label:e},(0,o.createElement)("div",{style:{maxWidth:240}},i&&i.url?l.focalPointPicker?(0,o.createElement)(o.Fragment,null,(0,o.createElement)(a.FocalPointPicker,{url:i.url,value:i.focalPoint,onChange:e=>n({...i,focalPoint:e})}),(0,o.createElement)(a.Button,{variant:"tertiary",onClick:t},(0,u.__)("Replace")),(0,o.createElement)(a.Button,{variant:"tertiary",isDestructive:!0,onClick:r},(0,u.__)("Remove"))):(0,o.createElement)("div",{className:"fbl_img-preview-box"},(0,o.createElement)("img",{onClick:t,src:i.url,className:"fbl_img-preview-box__img"}),(0,o.createElement)(a.Button,{className:"fbl_img-preview-box__btn",variant:"secondary",isDestructive:!0,onClick:r,icon:h})):(0,o.createElement)(a.Placeholder,{icon:p,label:(0,u.__)("Add Image")},(0,o.createElement)(a.Button,{onClick:t,variant:"primary"},(0,u.__)("Open Media Library")))))})),g=(0,r.jsx)(f.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)(f.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12.848 8a1 1 0 0 1-.914-.594l-.723-1.63a.5.5 0 0 0-.447-.276H5a.5.5 0 0 0-.5.5v11.5a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5v-9A.5.5 0 0 0 19 8h-6.152Zm.612-1.5a.5.5 0 0 1-.462-.31l-.445-1.084A2 2 0 0 0 10.763 4H5a2 2 0 0 0-2 2v11.5a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2h-5.54Z"})}),m=({label:e,onSelect:n,onRemove:r,value:i})=>(0,o.createElement)(t.MediaUploadCheck,null,(0,o.createElement)(t.MediaUpload,{onSelect:e=>{console.log(e),n({filename:e.filename,id:e.id,sizes:e.sizes,url:e.url,alt:e.alt,title:e.title,description:e.description,caption:e.caption})},value:i,render:({open:t})=>(0,o.createElement)(a.BaseControl,{label:e},(0,o.createElement)("div",{style:{maxWidth:240}},i?(0,o.createElement)("div",{style:{display:"inline-flex"}},(0,o.createElement)(a.Button,{isSecondary:!0,isOutline:!0,onClick:t},i.filename),(0,o.createElement)(a.Button,{isPrimary:!0,isDestructive:!0,onClick:r,icon:h})):(0,o.createElement)(a.Placeholder,{icon:g,label:(0,u.__)("File")},(0,o.createElement)(a.Button,{onClick:t,isPrimary:!0},(0,u.__)("Open Media Library")))))})),b=({children:e})=>(0,o.createElement)(a.SlotFillProvider,null,e,(0,o.createElement)(a.Slot,{name:"RichText.Toolbar"})),y=window.wp.compose;var w,x,C,E=n(556),S=function(){return S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},S.apply(this,arguments)},k={onActivate:E.func,onAddUndo:E.func,onBeforeAddUndo:E.func,onBeforeExecCommand:E.func,onBeforeGetContent:E.func,onBeforeRenderUI:E.func,onBeforeSetContent:E.func,onBeforePaste:E.func,onBlur:E.func,onChange:E.func,onClearUndos:E.func,onClick:E.func,onContextMenu:E.func,onCommentChange:E.func,onCompositionEnd:E.func,onCompositionStart:E.func,onCompositionUpdate:E.func,onCopy:E.func,onCut:E.func,onDblclick:E.func,onDeactivate:E.func,onDirty:E.func,onDrag:E.func,onDragDrop:E.func,onDragEnd:E.func,onDragGesture:E.func,onDragOver:E.func,onDrop:E.func,onExecCommand:E.func,onFocus:E.func,onFocusIn:E.func,onFocusOut:E.func,onGetContent:E.func,onHide:E.func,onInit:E.func,onInput:E.func,onKeyDown:E.func,onKeyPress:E.func,onKeyUp:E.func,onLoadContent:E.func,onMouseDown:E.func,onMouseEnter:E.func,onMouseLeave:E.func,onMouseMove:E.func,onMouseOut:E.func,onMouseOver:E.func,onMouseUp:E.func,onNodeChange:E.func,onObjectResizeStart:E.func,onObjectResized:E.func,onObjectSelected:E.func,onPaste:E.func,onPostProcess:E.func,onPostRender:E.func,onPreProcess:E.func,onProgressState:E.func,onRedo:E.func,onRemove:E.func,onReset:E.func,onSaveContent:E.func,onSelectionChange:E.func,onSetAttrib:E.func,onSetContent:E.func,onShow:E.func,onSubmit:E.func,onUndo:E.func,onVisualAid:E.func,onSkinLoadError:E.func,onThemeLoadError:E.func,onModelLoadError:E.func,onPluginLoadError:E.func,onIconsLoadError:E.func,onLanguageLoadError:E.func,onScriptsLoad:E.func,onScriptsLoadError:E.func},D=S({apiKey:E.string,licenseKey:E.string,id:E.string,inline:E.bool,init:E.object,initialValue:E.string,onEditorChange:E.func,value:E.string,tagName:E.string,tabIndex:E.number,cloudChannel:E.string,plugins:E.oneOfType([E.string,E.array]),toolbar:E.oneOfType([E.string,E.array]),disabled:E.bool,textareaName:E.string,tinymceScriptSrc:E.oneOfType([E.string,E.arrayOf(E.string),E.arrayOf(E.shape({src:E.string,async:E.bool,defer:E.bool}))]),rollback:E.oneOfType([E.number,E.oneOf([!1])]),scriptLoading:E.shape({async:E.bool,defer:E.bool,delay:E.number})},k),R=function(e){return"function"==typeof e},I=function(e){return e in k},N=function(e){return e.substr(2)},_=function(e,t,n,r,o){return function(t,n,r,o,i,a,l){var s=Object.keys(i).filter(I),c=Object.keys(a).filter(I),u=s.filter((function(e){return void 0===a[e]})),d=c.filter((function(e){return void 0===i[e]}));u.forEach((function(e){var t=N(e),n=l[t];r(t,n),delete l[t]})),d.forEach((function(r){var o=function(t,n){return function(r){var o;return null===(o=t(n))||void 0===o?void 0:o(r,e)}}(t,r),i=N(r);l[i]=o,n(i,o)}))}(o,e.on.bind(e),e.off.bind(e),0,t,n,r)},O=0,B=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++O+String(t)},T=function(e){return null!==e&&("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase())},M=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},j=function(e,t){void 0!==e&&(null!=e.mode&&"object"==typeof e.mode&&"function"==typeof e.mode.set?e.mode.set(t):e.setMode(t))},L=function(){return L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},L.apply(this,arguments)},A=function(e,t,n){var r,o,i=e.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=t.id,i.src=t.src,i.async=null!==(r=t.async)&&void 0!==r&&r,i.defer=null!==(o=t.defer)&&void 0!==o&&o;var a=function(){i.removeEventListener("load",a),i.removeEventListener("error",l),n(t.src)},l=function(e){i.removeEventListener("load",a),i.removeEventListener("error",l),n(t.src,e)};i.addEventListener("load",a),i.addEventListener("error",l),e.head&&e.head.appendChild(i)},P=(w=[],x=function(e){var t=w.find((function(t){return t.getDocument()===e}));return void 0===t&&(t=function(e){var t={},n=function(e,n){var r=t[e];r.done=!0,r.error=n;for(var o=0,i=r.handlers;o<i.length;o++)(0,i[o])(e,n);r.handlers=[]};return{loadScripts:function(r,o,i){var a=function(e){return void 0!==i?i(e):console.error(e)};if(0!==r.length)for(var l=0,s=!1,c=function(e,t){s||(t?(s=!0,a(t)):++l===r.length&&o())},u=0,d=r;u<d.length;u++){var f=d[u],p=t[f.src];if(p)p.done?c(f.src,p.error):p.handlers.push(c);else{var h=B("tiny-");t[f.src]={id:h,src:f.src,done:!1,error:null,handlers:[c]},A(e,L({id:h},f),n)}}else a(new Error("At least one script must be provided"))},deleteScripts:function(){for(var n,r=0,o=Object.values(t);r<o.length;r++){var i=o[r],a=e.getElementById(i.id);null!=a&&"SCRIPT"===a.tagName&&(null===(n=a.parentNode)||void 0===n||n.removeChild(a))}t={}},getDocument:function(){return e}}}(e),w.push(t)),t},{loadList:function(e,t,n,r,o){var i=function(){return x(e).loadScripts(t,r,o)};n>0?setTimeout(i,n):i()},reinitialize:function(){for(var e=w.pop();null!=e;e=w.pop())e.deleteScripts()}}),F=function(e){var t=e;return t&&t.tinymce?t.tinymce:null},z=(C=function(e,t){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},C(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),V=function(){return V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},V.apply(this,arguments)},H=function(e){function t(t){var n,r,i,a=e.call(this,t)||this;return a.rollbackTimer=void 0,a.valueCursor=void 0,a.rollbackChange=function(){var e=a.editor,t=a.props.value;e&&t&&t!==a.currentContent&&e.undoManager.ignore((function(){if(e.setContent(t),a.valueCursor&&(!a.inline||e.hasFocus()))try{e.selection.moveToBookmark(a.valueCursor)}catch(e){}})),a.rollbackTimer=void 0},a.handleBeforeInput=function(e){if(void 0!==a.props.value&&a.props.value===a.currentContent&&a.editor&&(!a.inline||a.editor.hasFocus()))try{a.valueCursor=a.editor.selection.getBookmark(3)}catch(e){}},a.handleBeforeInputSpecial=function(e){"Enter"!==e.key&&"Backspace"!==e.key&&"Delete"!==e.key||a.handleBeforeInput(e)},a.handleEditorChange=function(e){var t=a.editor;if(t&&t.initialized){var n=t.getContent();void 0!==a.props.value&&a.props.value!==n&&!1!==a.props.rollback&&(a.rollbackTimer||(a.rollbackTimer=window.setTimeout(a.rollbackChange,"number"==typeof a.props.rollback?a.props.rollback:200))),n!==a.currentContent&&(a.currentContent=n,R(a.props.onEditorChange)&&a.props.onEditorChange(n,t))}},a.handleEditorChangeSpecial=function(e){"Backspace"!==e.key&&"Delete"!==e.key||a.handleEditorChange(e)},a.initialise=function(e){var t,n,r;void 0===e&&(e=0);var o=a.elementRef.current;if(o)if(function(e){if(!("isConnected"in Node.prototype)){for(var t=e,n=e.parentNode;null!=n;)n=(t=n).parentNode;return t===e.ownerDocument}return e.isConnected}(o)){var i=F(a.view);if(!i)throw new Error("tinymce should have been loaded into global scope");var l,s,c=V(V(V(V({},a.props.init),{selector:void 0,target:o,readonly:a.props.disabled,inline:a.inline,plugins:(l=null===(t=a.props.init)||void 0===t?void 0:t.plugins,s=a.props.plugins,M(l).concat(M(s))),toolbar:null!==(n=a.props.toolbar)&&void 0!==n?n:null===(r=a.props.init)||void 0===r?void 0:r.toolbar}),a.props.licenseKey?{license_key:a.props.licenseKey}:{}),{setup:function(e){a.editor=e,a.bindHandlers({}),a.inline&&!T(o)&&e.once("PostRender",(function(t){e.setContent(a.getInitialValue(),{no_events:!0})})),a.props.init&&R(a.props.init.setup)&&a.props.init.setup(e)},init_instance_callback:function(e){var t,n,r=a.getInitialValue();a.currentContent=null!==(t=a.currentContent)&&void 0!==t?t:e.getContent(),a.currentContent!==r&&(a.currentContent=r,e.setContent(r),e.undoManager.clear(),e.undoManager.add(),e.setDirty(!1));var o=null!==(n=a.props.disabled)&&void 0!==n&&n;j(a.editor,o?"readonly":"design"),a.props.init&&R(a.props.init.init_instance_callback)&&a.props.init.init_instance_callback(e)}});a.inline||(o.style.visibility=""),T(o)&&(o.value=a.getInitialValue()),i.init(c)}else if(0===e)setTimeout((function(){return a.initialise(1)}),1);else{if(!(e<100))throw new Error("tinymce can only be initialised when in a document");setTimeout((function(){return a.initialise(e+1)}),100)}},a.id=a.props.id||B("tiny-react"),a.elementRef=o.createRef(),a.inline=null!==(i=null!==(n=a.props.inline)&&void 0!==n?n:null===(r=a.props.init)||void 0===r?void 0:r.inline)&&void 0!==i&&i,a.boundHandlers={},a}return z(t,e),Object.defineProperty(t.prototype,"view",{get:function(){var e,t;return null!==(t=null===(e=this.elementRef.current)||void 0===e?void 0:e.ownerDocument.defaultView)&&void 0!==t?t:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(e){var t,n,r=this;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(e),this.editor.initialized)){if(this.currentContent=null!==(t=this.currentContent)&&void 0!==t?t:this.editor.getContent(),"string"==typeof this.props.initialValue&&this.props.initialValue!==e.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if("string"==typeof this.props.value&&this.props.value!==this.currentContent){var o=this.editor;o.undoManager.transact((function(){var e;if(!r.inline||o.hasFocus())try{e=o.selection.getBookmark(3)}catch(e){}var t=r.valueCursor;if(o.setContent(r.props.value),!r.inline||o.hasFocus())for(var n=0,i=[e,t];n<i.length;n++){var a=i[n];if(a)try{o.selection.moveToBookmark(a),r.valueCursor=a;break}catch(e){}}}))}if(this.props.disabled!==e.disabled){var i=null!==(n=this.props.disabled)&&void 0!==n&&n;j(this.editor,i?"readonly":"design")}}},t.prototype.componentDidMount=function(){var e,t,n,r,o,i=this;null!==F(this.view)?this.initialise():Array.isArray(this.props.tinymceScriptSrc)&&0===this.props.tinymceScriptSrc.length?null===(t=(e=this.props).onScriptsLoadError)||void 0===t||t.call(e,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array.")):(null===(n=this.elementRef.current)||void 0===n?void 0:n.ownerDocument)&&P.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),null!==(o=null===(r=this.props.scriptLoading)||void 0===r?void 0:r.delay)&&void 0!==o?o:0,(function(){var e,t;null===(t=(e=i.props).onScriptsLoad)||void 0===t||t.call(e),i.initialise()}),(function(e){var t,n;null===(n=(t=i.props).onScriptsLoadError)||void 0===n||n.call(t,e)}))},t.prototype.componentWillUnmount=function(){var e=this,t=this.editor;t&&(t.off(this.changeEvents(),this.handleEditorChange),t.off(this.beforeInputEvent(),this.handleBeforeInput),t.off("keypress",this.handleEditorChangeSpecial),t.off("keydown",this.handleBeforeInputSpecial),t.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach((function(n){t.off(n,e.boundHandlers[n])})),this.boundHandlers={},t.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.changeEvents=function(){var e,t,n;return(null===(n=null===(t=null===(e=F(this.view))||void 0===e?void 0:e.Env)||void 0===t?void 0:t.browser)||void 0===n?void 0:n.isIE())?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},t.prototype.beforeInputEvent=function(){return window.InputEvent&&"function"==typeof InputEvent.prototype.getTargetRanges?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var e=this.props.tagName,t=void 0===e?"div":e;return o.createElement(t,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.renderIframe=function(){return o.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.getScriptSources=function(){var e,t,n=null===(e=this.props.scriptLoading)||void 0===e?void 0:e.async,r=null===(t=this.props.scriptLoading)||void 0===t?void 0:t.defer;if(void 0!==this.props.tinymceScriptSrc)return"string"==typeof this.props.tinymceScriptSrc?[{src:this.props.tinymceScriptSrc,async:n,defer:r}]:this.props.tinymceScriptSrc.map((function(e){return"string"==typeof e?{src:e,async:n,defer:r}:e}));var o=this.props.cloudChannel,i=this.props.apiKey?this.props.apiKey:"no-api-key";return[{src:"https://cdn.tiny.cloud/1/".concat(i,"/tinymce/").concat(o,"/tinymce.min.js"),async:n,defer:r}]},t.prototype.getInitialValue=function(){return"string"==typeof this.props.initialValue?this.props.initialValue:"string"==typeof this.props.value?this.props.value:""},t.prototype.bindHandlers=function(e){var t=this;if(void 0!==this.editor){_(this.editor,e,this.props,this.boundHandlers,(function(e){return t.props[e]}));var n=function(e){return void 0!==e.onEditorChange||void 0!==e.value},r=n(e),o=n(this.props);!r&&o?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):r&&!o&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=D,t.defaultProps={cloudChannel:"7"},t}(o.Component);const U=window.wp.data;window.wp.tinymce;const K={checkbox:function({value:e,label:t,setFieldAttributes:n}){return(0,r.jsx)(a.CheckboxControl,{label:t,onChange:n,checked:e})},toggle:function({value:e,label:t,setFieldAttributes:n}){return(0,r.jsx)(a.ToggleControl,{label:t,onChange:n,checked:e})},text:function({value:e,label:t,setFieldAttributes:n,field:o}){const[i,l]=(0,c.useState)(d(e));(0,c.useEffect)((()=>{l(d(e))}));const s=o.charLimit?`${(0,u.__)("Characters")}: ${i} / ${o.charLimit}`:void 0,f=!(o.charLimit&&i>o.charLimit);return(0,r.jsx)(a.TextControl,{className:f?"":"components-base-control--error",label:t,help:s,value:e,onChange:n})},email:function({value:e,label:t,setFieldAttributes:n}){const[o,i]=(0,c.useState)(!0);return(0,r.jsx)(a.TextControl,{type:"email",className:o?"":"components-base-control--error",label:t,value:e,onChange:n,onFocus:e=>{e.target.reportValidity()},onBlur:e=>{const t=e.target.checkValidity();i(t)}})},textarea:function({value:e,label:t,setFieldAttributes:n,field:o}){const[i,l]=(0,c.useState)(d(e));(0,c.useEffect)((()=>{l(d(e))}));const s=o.charLimit?`${(0,u.__)("Characters")}: ${i} / ${o.charLimit}`:void 0,f=!(o.charLimit&&i>o.charLimit);return(0,r.jsx)(a.TextareaControl,{className:f?"":"components-base-control--error",label:t,help:s,value:e,onChange:n})},number:function({value:e,label:t,setFieldAttributes:n}){return(0,r.jsx)(a.TextControl,{type:"number",label:t,value:e,onChange:n})},range:function({value:e,field:t,label:n,setFieldAttributes:o}){return(0,r.jsx)(a.RangeControl,{label:n,value:e,onChange:o,step:t.step,min:t.min,max:t.max})},select:function({value:e,field:t,label:n,setFieldAttributes:o}){return(0,r.jsx)(a.SelectControl,{label:n,value:e,onChange:o,options:t.options})},image:function({label:e,value:t,setFieldAttributes:n,removeFieldAttributes:r,field:i}){return(0,o.createElement)(v,{onSelect:n,onRemove:r,value:t,label:e,field:i})},file:function({label:e,value:t,setFieldAttributes:n,removeFieldAttributes:r}){return(0,o.createElement)(m,{onSelect:n,onRemove:r,value:t,label:e})},richText:function({value:e,label:n,setFieldAttributes:r,field:i}){const[l,s]=(0,c.useState)(d(e));(0,c.useEffect)((()=>{s(d(e))}));const f=i.charLimit?`${(0,u.__)("Characters")}: ${l} / ${i.charLimit}`:void 0,p=!(i.charLimit&&l>i.charLimit);return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(a.BaseControl,{label:n,className:p?"":"components-base-control--error"},(0,o.createElement)(b,null,(0,o.createElement)(t.RichText,{className:"fbl_rich-text",value:e,allowedFormats:i.allowedFormats,onChange:r,placeholder:(0,u.__)("Add text…"),inlineToolbar:!0})),(0,o.createElement)(a.Fill,{name:"RichText.Toolbar"},(0,o.createElement)(t.BlockControls,null))),i.charLimit&&(0,o.createElement)("p",{style:{fontStyle:"normal",color:"rgb(117, 117, 117)",fontSize:12}},f))},url:function({value:e,label:n,setFieldAttributes:o}){return(0,r.jsxs)(a.BaseControl,{className:"fbl_url-input",children:[(0,r.jsx)("label",{className:"fbl_url-input__label",children:n}),(0,r.jsx)(t.URLInputButton,{url:e,onChange:o}),(0,r.jsx)("small",{className:"fbl_url-input__url",children:e})]})},date:function({value:e,label:t,setFieldAttributes:n}){const o=(0,y.withState)({isVisible:!1})((({isVisible:t,setState:n,children:o})=>(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)(a.Button,{isSecondary:!0,onClick:t?null:()=>{n((()=>({isVisible:!0})))},children:e?new Date(e).toLocaleString():(0,u.__)("Date")}),t&&(0,r.jsx)(a.Popover,{onClose:()=>{n((()=>({isVisible:!1})))},position:"bottom left",children:o})]})));return(0,r.jsxs)(a.BaseControl,{className:"fbl_url-input",children:[(0,r.jsx)(a.BaseControl,{className:"fbl_url-input__label",label:t}),(0,r.jsx)(o,{children:(0,r.jsx)("div",{style:{padding:10},children:(0,r.jsx)(a.DateTimePicker,{currentDate:e,onChange:e=>{e||(e=""),n(e)}})})})]})},classicEditor:({value:e,label:t,setFieldAttributes:n,field:r})=>{const i=(0,U.select)("core/block-editor").getSettings().colors,l=[],[s,f]=(0,c.useState)(d(e));i.forEach((e=>{l.push(e.color.substring(1)),l.push(e.slug)})),(0,c.useEffect)((()=>{f(d(e))}));const p=r.charLimit?`${(0,u.__)("Characters")}: ${s} / ${r.charLimit}`:void 0,h=!(r.charLimit&&s>r.charLimit);return(0,o.createElement)(a.BaseControl,{label:t,className:h?"":"components-base-control--error"},(0,o.createElement)(H,{onEditorChange:e=>{n(e)},value:e,plugins:"lists textcolor colorpicker link",init:{height:300,menubar:!1,branding:!1,textcolor_map:l,toolbar:"undo redo formatselect bold italic forecolor backcolor alignleft aligncenter alignright alignjustify bullist numlist outdent indent link unlink removeformat help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}),r.charLimit&&(0,o.createElement)("p",{style:{fontStyle:"normal",color:"rgb(117, 117, 117)",fontSize:12}},p))},postTypeEntry:function({value:e,label:t,setFieldAttributes:n,field:o}){const i=o.postType,l=(0,U.useSelect)((e=>e("core").getEntityRecords("postType",i,{per_page:-1}))),[s,u]=(0,c.useState)([]);return(0,c.useEffect)((()=>{if(l){const e=l.slice().map((e=>({value:e.id,label:e.title.rendered})));u(e)}}),[l]),(0,r.jsx)(a.ComboboxControl,{label:t,value:e,onChange:e=>{n(e||-1)},options:s})}},$=({children:e,width:t})=>{const n=100*parseFloat(t);return(0,r.jsx)("div",{style:{width:`${n}%`},children:e})};function W({editProps:e,fieldName:t,field:n,subFieldName:o,subField:i,indexKey:a}){const{attributes:l,setAttributes:s}=e,c=e=>{const n=l[t].slice(0,a),r=l[t].slice(a+1);s({[t]:[...n,{...l[t][a],[o]:e},...r]})},u=K[i.input];return(0,r.jsx)(u,{setFieldAttributes:c,removeFieldAttributes:()=>{c(void 0)},field:i,label:i.label,value:l[t][a][o]})}const Y=(0,r.jsx)(f.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,r.jsx)(f.Path,{d:"M10 1c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 16c-3.9 0-7-3.1-7-7s3.1-7 7-7 7 3.1 7 7-3.1 7-7 7zm1-11H9v3H6v2h3v3h2v-3h3V9h-3V6zM10 1c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 16c-3.9 0-7-3.1-7-7s3.1-7 7-7 7 3.1 7 7-3.1 7-7 7zm1-11H9v3H6v2h3v3h2v-3h3V9h-3V6z"})}),X=(0,c.forwardRef)((function({icon:e,size:t=24,...n},r){return(0,c.cloneElement)(e,{width:t,height:t,...n,ref:r})})),G=(0,r.jsx)(f.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(f.Path,{d:"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z"})}),q=(0,r.jsx)(f.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)(f.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})}),Z=(0,r.jsx)(f.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)(f.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),J=window.ReactDOM,Q="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function ee(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function te(e){return"nodeType"in e}function ne(e){var t,n;return e?ee(e)?e:te(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function re(e){const{Document:t}=ne(e);return e instanceof t}function oe(e){return!ee(e)&&e instanceof ne(e).HTMLElement}function ie(e){return e instanceof ne(e).SVGElement}function ae(e){return e?ee(e)?e.document:te(e)?re(e)?e:oe(e)||ie(e)?e.ownerDocument:document:document:document}const le=Q?o.useLayoutEffect:o.useEffect;function se(e){const t=(0,o.useRef)(e);return le((()=>{t.current=e})),(0,o.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}function ce(e,t){void 0===t&&(t=[e]);const n=(0,o.useRef)(e);return le((()=>{n.current!==e&&(n.current=e)}),t),n}function ue(e,t){const n=(0,o.useRef)();return(0,o.useMemo)((()=>{const t=e(n.current);return n.current=t,t}),[...t])}function de(e){const t=se(e),n=(0,o.useRef)(null),r=(0,o.useCallback)((e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e}),[]);return[n,r]}function fe(e){const t=(0,o.useRef)();return(0,o.useEffect)((()=>{t.current=e}),[e]),t.current}let pe={};function he(e,t){return(0,o.useMemo)((()=>{if(t)return t;const n=null==pe[e]?0:pe[e]+1;return pe[e]=n,e+"-"+n}),[e,t])}function ve(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce(((t,n)=>{const r=Object.entries(n);for(const[n,o]of r){const r=t[n];null!=r&&(t[n]=r+e*o)}return t}),{...t})}}const ge=ve(1),me=ve(-1);function be(e){if(!e)return!1;const{KeyboardEvent:t}=ne(e.target);return t&&e instanceof t}function ye(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=ne(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const we=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[we.Translate.toString(e),we.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),xe="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ce(e){return e.matches(xe)?e:e.querySelector(xe)}const Ee={display:"none"};function Se(e){let{id:t,value:n}=e;return i().createElement("div",{id:t,style:Ee},n)}function ke(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return i().createElement("div",{id:t,style:{position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}const De=(0,o.createContext)(null),Re={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},Ie={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Ne(e){let{announcements:t=Ie,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=Re}=e;const{announce:l,announcement:s}=function(){const[e,t]=(0,o.useState)("");return{announce:(0,o.useCallback)((e=>{null!=e&&t(e)}),[]),announcement:e}}(),c=he("DndLiveRegion"),[u,d]=(0,o.useState)(!1);if((0,o.useEffect)((()=>{d(!0)}),[]),function(e){const t=(0,o.useContext)(De);(0,o.useEffect)((()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)}),[e,t])}((0,o.useMemo)((()=>({onDragStart(e){let{active:n}=e;l(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&l(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;l(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;l(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;l(t.onDragCancel({active:n,over:r}))}})),[l,t])),!u)return null;const f=i().createElement(i().Fragment,null,i().createElement(Se,{id:r,value:a.draggable}),i().createElement(ke,{id:c,announcement:s}));return n?(0,J.createPortal)(f,n):f}var _e;function Oe(){}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(_e||(_e={}));const Be=Object.freeze({x:0,y:0});function Te(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Me(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=o-r,l=i-n;if(r<o&&n<i){const n=t.width*t.height,r=e.width*e.height,o=a*l;return Number((o/(n+r-o)).toFixed(4))}return 0}const je=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const e of r){const{id:r}=e,i=n.get(r);if(i){const n=Me(i,t);n>0&&o.push({id:r,data:{droppableContainer:e,value:n}})}}return o.sort(Te)};function Le(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Be}function Ae(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce(((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x})),{...t})}}const Pe=Ae(1);const Fe={ignoreTransform:!1};function ze(e,t){void 0===t&&(t=Fe);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=ne(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=function(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!r)return e;const{scaleX:o,scaleY:i,x:a,y:l}=r,s=e.left-a-(1-o)*parseFloat(n),c=e.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),u=o?e.width/o:e.width,d=i?e.height/i:e.height;return{width:u,height:d,top:c,right:s+u,bottom:c+d,left:s}}(n,t,r))}const{top:r,left:o,width:i,height:a,bottom:l,right:s}=n;return{top:r,left:o,width:i,height:a,bottom:l,right:s}}function Ve(e){return ze(e,{ignoreTransform:!0})}function He(e,t){const n=[];return e?function r(o){if(null!=t&&n.length>=t)return n;if(!o)return n;if(re(o)&&null!=o.scrollingElement&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!oe(o)||ie(o))return n;if(n.includes(o))return n;const i=ne(e).getComputedStyle(o);return o!==e&&function(e,t){void 0===t&&(t=ne(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const r=t[e];return"string"==typeof r&&n.test(r)}))}(o,i)&&n.push(o),function(e,t){return void 0===t&&(t=ne(e).getComputedStyle(e)),"fixed"===t.position}(o,i)?n:r(o.parentNode)}(e):n}function Ue(e){const[t]=He(e,1);return null!=t?t:null}function Ke(e){return Q&&e?ee(e)?e:te(e)?re(e)||e===ae(e).scrollingElement?window:oe(e)?e:null:null:null}function $e(e){return ee(e)?e.scrollX:e.scrollLeft}function We(e){return ee(e)?e.scrollY:e.scrollTop}function Ye(e){return{x:$e(e),y:We(e)}}var Xe;function Ge(e){return!(!Q||!e)&&e===document.scrollingElement}function qe(e){const t={x:0,y:0},n=Ge(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(Xe||(Xe={}));const Ze={x:.2,y:.2};function Je(e,t,n,r,o){let{top:i,left:a,right:l,bottom:s}=n;void 0===r&&(r=10),void 0===o&&(o=Ze);const{isTop:c,isBottom:u,isLeft:d,isRight:f}=qe(e),p={x:0,y:0},h={x:0,y:0},v=t.height*o.y,g=t.width*o.x;return!c&&i<=t.top+v?(p.y=Xe.Backward,h.y=r*Math.abs((t.top+v-i)/v)):!u&&s>=t.bottom-v&&(p.y=Xe.Forward,h.y=r*Math.abs((t.bottom-v-s)/v)),!f&&l>=t.right-g?(p.x=Xe.Forward,h.x=r*Math.abs((t.right-g-l)/g)):!d&&a<=t.left+g&&(p.x=Xe.Backward,h.x=r*Math.abs((t.left+g-a)/g)),{direction:p,speed:h}}function Qe(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function et(e){return e.reduce(((e,t)=>ge(e,Ye(t))),Be)}const tt=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+$e(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+We(t)),0)}]];class nt{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=He(t),r=et(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[e,t,o]of tt)for(const i of t)Object.defineProperty(this,i,{get:()=>{const t=o(n),a=r[e]-t;return this.rect[i]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class rt{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function ot(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var it,at,lt;function st(e){e.preventDefault()}function ct(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(it||(it={})),(lt=at||(at={})).Space="Space",lt.Down="ArrowDown",lt.Right="ArrowRight",lt.Left="ArrowLeft",lt.Up="ArrowUp",lt.Esc="Escape",lt.Enter="Enter";const ut={start:[at.Space,at.Enter],cancel:[at.Esc],end:[at.Space,at.Enter]},dt=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case at.Right:return{...n,x:n.x+25};case at.Left:return{...n,x:n.x-25};case at.Down:return{...n,y:n.y+25};case at.Up:return{...n,y:n.y-25}}};class ft{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new rt(ae(t)),this.windowListeners=new rt(ne(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(it.Resize,this.handleCancel),this.windowListeners.add(it.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(it.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&function(e,t){if(void 0===t&&(t=ze),!e)return;const{top:n,left:r,bottom:o,right:i}=t(e);Ue(e)&&(o<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(n),t(Be)}handleKeyDown(e){if(be(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:o=ut,coordinateGetter:i=dt,scrollBehavior:a="smooth"}=r,{code:l}=e;if(o.end.includes(l))return void this.handleEnd(e);if(o.cancel.includes(l))return void this.handleCancel(e);const{collisionRect:s}=n.current,c=s?{x:s.left,y:s.top}:Be;this.referenceCoordinates||(this.referenceCoordinates=c);const u=i(e,{active:t,context:n.current,currentCoordinates:c});if(u){const t=me(u,c),r={x:0,y:0},{scrollableAncestors:o}=n.current;for(const n of o){const o=e.code,{isTop:i,isRight:l,isLeft:s,isBottom:c,maxScroll:d,minScroll:f}=qe(n),p=Qe(n),h={x:Math.min(o===at.Right?p.right-p.width/2:p.right,Math.max(o===at.Right?p.left:p.left+p.width/2,u.x)),y:Math.min(o===at.Down?p.bottom-p.height/2:p.bottom,Math.max(o===at.Down?p.top:p.top+p.height/2,u.y))},v=o===at.Right&&!l||o===at.Left&&!s,g=o===at.Down&&!c||o===at.Up&&!i;if(v&&h.x!==u.x){const e=n.scrollLeft+t.x,i=o===at.Right&&e<=d.x||o===at.Left&&e>=f.x;if(i&&!t.y)return void n.scrollTo({left:e,behavior:a});r.x=i?n.scrollLeft-e:o===at.Right?n.scrollLeft-d.x:n.scrollLeft-f.x,r.x&&n.scrollBy({left:-r.x,behavior:a});break}if(g&&h.y!==u.y){const e=n.scrollTop+t.y,i=o===at.Down&&e<=d.y||o===at.Up&&e>=f.y;if(i&&!t.x)return void n.scrollTo({top:e,behavior:a});r.y=i?n.scrollTop-e:o===at.Down?n.scrollTop-d.y:n.scrollTop-f.y,r.y&&n.scrollBy({top:-r.y,behavior:a});break}}this.handleMove(e,ge(me(u,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function pt(e){return Boolean(e&&"distance"in e)}function ht(e){return Boolean(e&&"delay"in e)}ft.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=ut,onActivation:o}=t,{active:i}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const t=i.activatorNode.current;return!(t&&e.target!==t||(e.preventDefault(),null==o||o({event:e.nativeEvent}),0))}return!1}}];class vt{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=ne(e);return e instanceof t?e:ae(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:i}=o;this.props=e,this.events=t,this.document=ae(i),this.documentListeners=new rt(this.document),this.listeners=new rt(n),this.windowListeners=new rt(ne(i)),this.initialCoordinates=null!=(r=ye(o))?r:Be,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(it.Resize,this.handleCancel),this.windowListeners.add(it.DragStart,st),this.windowListeners.add(it.VisibilityChange,this.handleCancel),this.windowListeners.add(it.ContextMenu,st),this.documentListeners.add(it.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ht(t))return void(this.timeoutId=setTimeout(this.handleStart,t.delay));if(pt(t))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(it.Click,ct,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(it.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:o}=this,{onMove:i,options:{activationConstraint:a}}=o;if(!r)return;const l=null!=(t=ye(e))?t:Be,s=me(r,l);if(!n&&a){if(pt(a)){if(null!=a.tolerance&&ot(s,a.tolerance))return this.handleCancel();if(ot(s,a.distance))return this.handleStart()}return ht(a)&&ot(s,a.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),i(l)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===at.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const gt={move:{name:"pointermove"},end:{name:"pointerup"}};class mt extends vt{constructor(e){const{event:t}=e,n=ae(t.target);super(e,gt,n)}}mt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button||(null==r||r({event:n}),0))}}];const bt={move:{name:"mousemove"},end:{name:"mouseup"}};var yt;!function(e){e[e.RightClick=2]="RightClick"}(yt||(yt={})),class extends vt{constructor(e){super(e,bt,ae(e.event.target))}}.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==yt.RightClick&&(null==r||r({event:n}),!0)}}];const wt={move:{name:"touchmove"},end:{name:"touchend"}};var xt,Ct;(class extends vt{constructor(e){super(e,wt)}static setup(){return window.addEventListener(wt.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(wt.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return!(o.length>1||(null==r||r({event:n}),0))}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(xt||(xt={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(Ct||(Ct={}));const Et={x:{[Xe.Backward]:!1,[Xe.Forward]:!1},y:{[Xe.Backward]:!1,[Xe.Forward]:!1}};var St,kt;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(St||(St={})),function(e){e.Optimized="optimized"}(kt||(kt={}));const Dt=new Map;function Rt(e,t){return ue((n=>e?n||("function"==typeof t?t(e):e):null),[t,e])}function It(e){let{callback:t,disabled:n}=e;const r=se(t),i=(0,o.useMemo)((()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(r)}),[n]);return(0,o.useEffect)((()=>()=>null==i?void 0:i.disconnect()),[i]),i}function Nt(e){return new nt(ze(e),e)}function _t(e,t,n){void 0===t&&(t=Nt);const[r,i]=(0,o.useReducer)((function(r){if(!e)return null;var o;if(!1===e.isConnected)return null!=(o=null!=r?r:n)?o:null;const i=t(e);return JSON.stringify(r)===JSON.stringify(i)?r:i}),null),a=function(e){let{callback:t,disabled:n}=e;const r=se(t),i=(0,o.useMemo)((()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(r)}),[r,n]);return(0,o.useEffect)((()=>()=>null==i?void 0:i.disconnect()),[i]),i}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){i();break}}}}),l=It({callback:i});return le((()=>{i(),e?(null==l||l.observe(e),null==a||a.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==a||a.disconnect())}),[e]),r}const Ot=[];function Bt(e,t){void 0===t&&(t=[]);const n=(0,o.useRef)(null);return(0,o.useEffect)((()=>{n.current=null}),t),(0,o.useEffect)((()=>{const t=e!==Be;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?me(e,n.current):Be}function Tt(e){return(0,o.useMemo)((()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null),[e])}const Mt=[];const jt=[{sensor:mt,options:{}},{sensor:ft,options:{}}],Lt={current:{}},At={draggable:{measure:Ve},droppable:{measure:Ve,strategy:St.WhileDragging,frequency:kt.Optimized},dragOverlay:{measure:ze}};class Pt extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const Ft={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Pt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Oe},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:At,measureDroppableContainers:Oe,windowRect:null,measuringScheduled:!1},zt={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Oe,draggableNodes:new Map,over:null,measureDroppableContainers:Oe},Vt=(0,o.createContext)(zt),Ht=(0,o.createContext)(Ft);function Ut(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Pt}}}function Kt(e,t){switch(t.type){case _e.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case _e.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case _e.DragEnd:case _e.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case _e.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Pt(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case _e.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new Pt(e.droppable.containers);return a.set(n,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:a}}}case _e.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new Pt(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function $t(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=(0,o.useContext)(Vt),a=fe(r),l=fe(null==n?void 0:n.id);return(0,o.useEffect)((()=>{if(!t&&!r&&a&&null!=l){if(!be(a))return;if(document.activeElement===a.target)return;const e=i.get(l);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=Ce(e);if(t){t.focus();break}}}))}}),[r,t,i,l,a]),null}const Wt=(0,o.createContext)({...Be,scaleX:1,scaleY:1});var Yt;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(Yt||(Yt={}));const Xt=(0,o.memo)((function(e){var t,n,r,a;let{id:l,accessibility:s,autoScroll:c=!0,children:u,sensors:d=jt,collisionDetection:f=je,measuring:p,modifiers:h,...v}=e;const g=(0,o.useReducer)(Kt,void 0,Ut),[m,b]=g,[y,w]=function(){const[e]=(0,o.useState)((()=>new Set)),t=(0,o.useCallback)((t=>(e.add(t),()=>e.delete(t))),[e]);return[(0,o.useCallback)((t=>{let{type:n,event:r}=t;e.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)}))}),[e]),t]}(),[x,C]=(0,o.useState)(Yt.Uninitialized),E=x===Yt.Initialized,{draggable:{active:S,nodes:k,translate:D},droppable:{containers:R}}=m,I=S?k.get(S):null,N=(0,o.useRef)({initial:null,translated:null}),_=(0,o.useMemo)((()=>{var e;return null!=S?{id:S,data:null!=(e=null==I?void 0:I.data)?e:Lt,rect:N}:null}),[S,I]),O=(0,o.useRef)(null),[B,T]=(0,o.useState)(null),[M,j]=(0,o.useState)(null),L=ce(v,Object.values(v)),A=he("DndDescribedBy",l),P=(0,o.useMemo)((()=>R.getEnabled()),[R]),F=(z=p,(0,o.useMemo)((()=>({draggable:{...At.draggable,...null==z?void 0:z.draggable},droppable:{...At.droppable,...null==z?void 0:z.droppable},dragOverlay:{...At.dragOverlay,...null==z?void 0:z.dragOverlay}})),[null==z?void 0:z.draggable,null==z?void 0:z.droppable,null==z?void 0:z.dragOverlay]));var z;const{droppableRects:V,measureDroppableContainers:H,measuringScheduled:U}=function(e,t){let{dragging:n,dependencies:r,config:i}=t;const[a,l]=(0,o.useState)(null),{frequency:s,measure:c,strategy:u}=i,d=(0,o.useRef)(e),f=function(){switch(u){case St.Always:return!1;case St.BeforeDragging:return n;default:return!n}}(),p=ce(f),h=(0,o.useCallback)((function(e){void 0===e&&(e=[]),p.current||l((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[p]),v=(0,o.useRef)(null),g=ue((t=>{if(f&&!n)return Dt;if(!t||t===Dt||d.current!==e||null!=a){const t=new Map;for(let n of e){if(!n)continue;if(a&&a.length>0&&!a.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new nt(c(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t}),[e,a,n,f,c]);return(0,o.useEffect)((()=>{d.current=e}),[e]),(0,o.useEffect)((()=>{f||h()}),[n,f]),(0,o.useEffect)((()=>{a&&a.length>0&&l(null)}),[JSON.stringify(a)]),(0,o.useEffect)((()=>{f||"number"!=typeof s||null!==v.current||(v.current=setTimeout((()=>{h(),v.current=null}),s))}),[s,f,h,...r]),{droppableRects:g,measureDroppableContainers:h,measuringScheduled:null!=a}}(P,{dragging:E,dependencies:[D.x,D.y],config:F.droppable}),K=function(e,t){const n=null!==t?e.get(t):void 0,r=n?n.node.current:null;return ue((e=>{var n;return null===t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(k,S),$=(0,o.useMemo)((()=>M?ye(M):null),[M]),W=function(){const e=!1===(null==B?void 0:B.autoScrollEnabled),t="object"==typeof c?!1===c.enabled:!1===c,n=E&&!e&&!t;return"object"==typeof c?{...c,enabled:n}:{enabled:n}}(),Y=function(e,t){return Rt(e,t)}(K,F.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const a=(0,o.useRef)(!1),{x:l,y:s}="boolean"==typeof i?{x:i,y:i}:i;le((()=>{if(!l&&!s||!t)return void(a.current=!1);if(a.current||!r)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const o=Le(n(e),r);if(l||(o.x=0),s||(o.y=0),a.current=!0,Math.abs(o.x)>0||Math.abs(o.y)>0){const t=Ue(e);t&&t.scrollBy({top:o.y,left:o.x})}}),[t,l,s,r,n])}({activeNode:S?k.get(S):null,config:W.layoutShiftCompensation,initialRect:Y,measure:F.draggable.measure});const X=_t(K,F.draggable.measure,Y),G=_t(K?K.parentElement:null),q=(0,o.useRef)({activatorEvent:null,active:null,activeNode:K,collisionRect:null,collisions:null,droppableRects:V,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Z=R.getNodeFor(null==(t=q.current.over)?void 0:t.id),ee=function(e){let{measure:t}=e;const[n,r]=(0,o.useState)(null),i=It({callback:(0,o.useCallback)((e=>{for(const{target:n}of e)if(oe(n)){r((e=>{const r=t(n);return e?{...e,width:r.width,height:r.height}:r}));break}}),[t])}),a=(0,o.useCallback)((e=>{const n=function(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return oe(t)?t:e}(e);null==i||i.disconnect(),n&&(null==i||i.observe(n)),r(n?t(n):null)}),[t,i]),[l,s]=de(a);return(0,o.useMemo)((()=>({nodeRef:l,rect:n,setRef:s})),[n,l,s])}({measure:F.dragOverlay.measure}),te=null!=(n=ee.nodeRef.current)?n:K,re=E?null!=(r=ee.rect)?r:X:null,ie=Boolean(ee.nodeRef.current&&ee.rect),ae=Le(se=ie?null:X,Rt(se));var se;const pe=Tt(te?ne(te):null),ve=function(e){const t=(0,o.useRef)(e),n=ue((n=>e?n&&n!==Ot&&e&&t.current&&e.parentNode===t.current.parentNode?n:He(e):Ot),[e]);return(0,o.useEffect)((()=>{t.current=e}),[e]),n}(E?null!=Z?Z:K:null),me=function(e,t){void 0===t&&(t=ze);const[n]=e,r=Tt(n?ne(n):null),[i,a]=(0,o.useReducer)((function(){return e.length?e.map((e=>Ge(e)?r:new nt(t(e),e))):Mt}),Mt),l=It({callback:a});return e.length>0&&i===Mt&&a(),le((()=>{e.length?e.forEach((e=>null==l?void 0:l.observe(e))):(null==l||l.disconnect(),a())}),[e]),i}(ve),be=function(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...r})),n):n}(h,{transform:{x:D.x-ae.x,y:D.y-ae.y,scaleX:1,scaleY:1},activatorEvent:M,active:_,activeNodeRect:X,containerNodeRect:G,draggingNodeRect:re,over:q.current.over,overlayNodeRect:ee.rect,scrollableAncestors:ve,scrollableAncestorRects:me,windowRect:pe}),we=$?ge($,D):null,xe=function(e){const[t,n]=(0,o.useState)(null),r=(0,o.useRef)(e),i=(0,o.useCallback)((e=>{const t=Ke(e.target);t&&n((e=>e?(e.set(t,Ye(t)),new Map(e)):null))}),[]);return(0,o.useEffect)((()=>{const t=r.current;if(e!==t){o(t);const a=e.map((e=>{const t=Ke(e);return t?(t.addEventListener("scroll",i,{passive:!0}),[t,Ye(t)]):null})).filter((e=>null!=e));n(a.length?new Map(a):null),r.current=e}return()=>{o(e),o(t)};function o(e){e.forEach((e=>{const t=Ke(e);null==t||t.removeEventListener("scroll",i)}))}}),[i,e]),(0,o.useMemo)((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>ge(e,t)),Be):et(e):Be),[e,t])}(ve),Ce=Bt(xe),Ee=Bt(xe,[X]),Se=ge(be,Ce),ke=re?Pe(re,be):null,Re=_&&ke?f({active:_,collisionRect:ke,droppableRects:V,droppableContainers:P,pointerCoordinates:we}):null,Ie=function(e,t){if(!e||0===e.length)return null;const[n]=e;return n.id}(Re),[Oe,Te]=(0,o.useState)(null),Me=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(ie?be:ge(be,Ee),null!=(a=null==Oe?void 0:Oe.rect)?a:null,X),Ae=(0,o.useCallback)(((e,t)=>{let{sensor:n,options:r}=t;if(null==O.current)return;const o=k.get(O.current);if(!o)return;const i=e.nativeEvent,a=new n({active:O.current,activeNode:o,event:i,options:r,context:q,onStart(e){const t=O.current;if(null==t)return;const n=k.get(t);if(!n)return;const{onDragStart:r}=L.current,o={active:{id:t,data:n.data,rect:N}};(0,J.unstable_batchedUpdates)((()=>{null==r||r(o),C(Yt.Initializing),b({type:_e.DragStart,initialCoordinates:e,active:t}),y({type:"onDragStart",event:o})}))},onMove(e){b({type:_e.DragMove,coordinates:e})},onEnd:l(_e.DragEnd),onCancel:l(_e.DragCancel)});function l(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:o}=q.current;let a=null;if(t&&o){const{cancelDrop:l}=L.current;a={activatorEvent:i,active:t,collisions:n,delta:o,over:r},e===_e.DragEnd&&"function"==typeof l&&await Promise.resolve(l(a))&&(e=_e.DragCancel)}O.current=null,(0,J.unstable_batchedUpdates)((()=>{b({type:e}),C(Yt.Uninitialized),Te(null),T(null),j(null);const t=e===_e.DragEnd?"onDragEnd":"onDragCancel";if(a){const e=L.current[t];null==e||e(a),y({type:t,event:a})}}))}}(0,J.unstable_batchedUpdates)((()=>{T(a),j(e.nativeEvent)}))}),[k]),Fe=(0,o.useCallback)(((e,t)=>(n,r)=>{const o=n.nativeEvent,i=k.get(r);if(null!==O.current||!i||o.dndKit||o.defaultPrevented)return;const a={active:i};!0===e(n,t.options,a)&&(o.dndKit={capturedBy:t.sensor},O.current=r,Ae(n,t))}),[k,Ae]),Ve=function(e,t){return(0,o.useMemo)((()=>e.reduce(((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,n)})))]}),[])),[e,t])}(d,Fe);!function(e){(0,o.useEffect)((()=>{if(!Q)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(d),le((()=>{X&&x===Yt.Initializing&&C(Yt.Initialized)}),[X,x]),(0,o.useEffect)((()=>{const{onDragMove:e}=L.current,{active:t,activatorEvent:n,collisions:r,over:o}=q.current;if(!t||!n)return;const i={active:t,activatorEvent:n,collisions:r,delta:{x:Se.x,y:Se.y},over:o};(0,J.unstable_batchedUpdates)((()=>{null==e||e(i),y({type:"onDragMove",event:i})}))}),[Se.x,Se.y]),(0,o.useEffect)((()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:o}=q.current;if(!e||null==O.current||!t||!o)return;const{onDragOver:i}=L.current,a=r.get(Ie),l=a&&a.rect.current?{id:a.id,rect:a.rect.current,data:a.data,disabled:a.disabled}:null,s={active:e,activatorEvent:t,collisions:n,delta:{x:o.x,y:o.y},over:l};(0,J.unstable_batchedUpdates)((()=>{Te(l),null==i||i(s),y({type:"onDragOver",event:s})}))}),[Ie]),le((()=>{q.current={activatorEvent:M,active:_,activeNode:K,collisionRect:ke,collisions:Re,droppableRects:V,draggableNodes:k,draggingNode:te,draggingNodeRect:re,droppableContainers:R,over:Oe,scrollableAncestors:ve,scrollAdjustedTranslate:Se},N.current={initial:re,translated:ke}}),[_,K,Re,ke,k,te,re,V,R,Oe,ve,Se]),function(e){let{acceleration:t,activator:n=xt.Pointer,canScroll:r,draggingRect:i,enabled:a,interval:l=5,order:s=Ct.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:p}=e;const h=function(e){let{delta:t,disabled:n}=e;const r=fe(t);return ue((e=>{if(n||!r||!e)return Et;const o=Math.sign(t.x-r.x),i=Math.sign(t.y-r.y);return{x:{[Xe.Backward]:e.x[Xe.Backward]||-1===o,[Xe.Forward]:e.x[Xe.Forward]||1===o},y:{[Xe.Backward]:e.y[Xe.Backward]||-1===i,[Xe.Forward]:e.y[Xe.Forward]||1===i}}}),[n,t,r])}({delta:f,disabled:!a}),[v,g]=function(){const e=(0,o.useRef)(null);return[(0,o.useCallback)(((t,n)=>{e.current=setInterval(t,n)}),[]),(0,o.useCallback)((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),m=(0,o.useRef)({x:0,y:0}),b=(0,o.useRef)({x:0,y:0}),y=(0,o.useMemo)((()=>{switch(n){case xt.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case xt.DraggableRect:return i}}),[n,i,c]),w=(0,o.useRef)(null),x=(0,o.useCallback)((()=>{const e=w.current;if(!e)return;const t=m.current.x*b.current.x,n=m.current.y*b.current.y;e.scrollBy(t,n)}),[]),C=(0,o.useMemo)((()=>s===Ct.TreeOrder?[...u].reverse():u),[s,u]);(0,o.useEffect)((()=>{if(a&&u.length&&y){for(const e of C){if(!1===(null==r?void 0:r(e)))continue;const n=u.indexOf(e),o=d[n];if(!o)continue;const{direction:i,speed:a}=Je(e,o,y,t,p);for(const e of["x","y"])h[e][i[e]]||(a[e]=0,i[e]=0);if(a.x>0||a.y>0)return g(),w.current=e,v(x,l),m.current=a,void(b.current=i)}m.current={x:0,y:0},b.current={x:0,y:0},g()}else g()}),[t,x,r,g,a,l,JSON.stringify(y),JSON.stringify(h),v,u,C,d,JSON.stringify(p)])}({...W,delta:D,draggingRect:ke,pointerCoordinates:we,scrollableAncestors:ve,scrollableAncestorRects:me});const $e=(0,o.useMemo)((()=>({active:_,activeNode:K,activeNodeRect:X,activatorEvent:M,collisions:Re,containerNodeRect:G,dragOverlay:ee,draggableNodes:k,droppableContainers:R,droppableRects:V,over:Oe,measureDroppableContainers:H,scrollableAncestors:ve,scrollableAncestorRects:me,measuringConfiguration:F,measuringScheduled:U,windowRect:pe})),[_,K,X,M,Re,G,ee,k,R,V,Oe,H,ve,me,F,U,pe]),We=(0,o.useMemo)((()=>({activatorEvent:M,activators:Ve,active:_,activeNodeRect:X,ariaDescribedById:{draggable:A},dispatch:b,draggableNodes:k,over:Oe,measureDroppableContainers:H})),[M,Ve,_,X,b,A,k,Oe,H]);return i().createElement(De.Provider,{value:w},i().createElement(Vt.Provider,{value:We},i().createElement(Ht.Provider,{value:$e},i().createElement(Wt.Provider,{value:Me},u)),i().createElement($t,{disabled:!1===(null==s?void 0:s.restoreFocus)})),i().createElement(Ne,{...s,hiddenTextDescribedById:A}))})),Gt=(0,o.createContext)(null),qt="button",Zt="Droppable";const Jt="Droppable",Qt={timeout:25};function en(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function tn(e,t){return e.reduce(((e,n,r)=>{const o=t.get(n);return o&&(e[r]=o),e}),Array(e.length))}function nn(e){return null!==e&&e>=0}const rn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const i=en(t,r,n),a=t[o],l=i[o];return l&&a?{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}:null},on="Sortable",an=i().createContext({activeIndex:-1,containerId:on,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rn,disabled:{draggable:!1,droppable:!1}});function ln(e){let{children:t,id:n,items:r,strategy:a=rn,disabled:l=!1}=e;const{active:s,dragOverlay:c,droppableRects:u,over:d,measureDroppableContainers:f}=(0,o.useContext)(Ht),p=he(on,n),h=Boolean(null!==c.rect),v=(0,o.useMemo)((()=>r.map((e=>"object"==typeof e&&"id"in e?e.id:e))),[r]),g=null!=s,m=s?v.indexOf(s.id):-1,b=d?v.indexOf(d.id):-1,y=(0,o.useRef)(v),w=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(v,y.current),x=-1!==b&&-1===m||w,C=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(l);le((()=>{w&&g&&f(v)}),[w,v,g,f]),(0,o.useEffect)((()=>{y.current=v}),[v]);const E=(0,o.useMemo)((()=>({activeIndex:m,containerId:p,disabled:C,disableTransforms:x,items:v,overIndex:b,useDragOverlay:h,sortedRects:tn(v,u),strategy:a})),[m,p,C.draggable,C.droppable,x,v,b,u,h,a]);return i().createElement(an.Provider,{value:E},t)}const sn=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return en(n,r,o).indexOf(t)},cn=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:i,newIndex:a,previousItems:l,previousContainerId:s,transition:c}=e;return!(!c||!r||l!==i&&o===a||!n&&(a===o||t!==s))},un={duration:200,easing:"ease"},dn="transform",fn=we.Transition.toString({property:dn,duration:0,easing:"linear"}),pn={roleDescription:"sortable"};function hn(e){let{animateLayoutChanges:t=cn,attributes:n,disabled:r,data:i,getNewIndex:a=sn,id:l,strategy:s,resizeObserverConfig:c,transition:u=un}=e;const{items:d,containerId:f,activeIndex:p,disabled:h,disableTransforms:v,sortedRects:g,overIndex:m,useDragOverlay:b,strategy:y}=(0,o.useContext)(an),w=function(e,t){var n,r;return"boolean"==typeof e?{draggable:e,droppable:!1}:{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(r,h),x=d.indexOf(l),C=(0,o.useMemo)((()=>({sortable:{containerId:f,index:x,items:d},...i})),[f,i,x,d]),E=(0,o.useMemo)((()=>d.slice(d.indexOf(l))),[d,l]),{rect:S,node:k,isOver:D,setNodeRef:R}=function(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const a=he(Jt),{active:l,dispatch:s,over:c,measureDroppableContainers:u}=(0,o.useContext)(Vt),d=(0,o.useRef)({disabled:n}),f=(0,o.useRef)(!1),p=(0,o.useRef)(null),h=(0,o.useRef)(null),{disabled:v,updateMeasurementsFor:g,timeout:m}={...Qt,...i},b=ce(null!=g?g:r),y=It({callback:(0,o.useCallback)((()=>{f.current?(null!=h.current&&clearTimeout(h.current),h.current=setTimeout((()=>{u(Array.isArray(b.current)?b.current:[b.current]),h.current=null}),m)):f.current=!0}),[m]),disabled:v||!l}),w=(0,o.useCallback)(((e,t)=>{y&&(t&&(y.unobserve(t),f.current=!1),e&&y.observe(e))}),[y]),[x,C]=de(w),E=ce(t);return(0,o.useEffect)((()=>{y&&x.current&&(y.disconnect(),f.current=!1,y.observe(x.current))}),[x,y]),le((()=>(s({type:_e.RegisterDroppable,element:{id:r,key:a,disabled:n,node:x,rect:p,data:E}}),()=>s({type:_e.UnregisterDroppable,key:a,id:r}))),[r]),(0,o.useEffect)((()=>{n!==d.current.disabled&&(s({type:_e.SetDroppableDisabled,id:r,key:a,disabled:n}),d.current.disabled=n)}),[r,a,n,s]),{active:l,rect:p,isOver:(null==c?void 0:c.id)===r,node:x,over:c,setNodeRef:C}}({id:l,data:C,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...c}}),{active:I,activatorEvent:N,activeNodeRect:_,attributes:O,setNodeRef:B,listeners:T,isDragging:M,over:j,setActivatorNodeRef:L,transform:A}=function(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const a=he(Zt),{activators:l,activatorEvent:s,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:p}=(0,o.useContext)(Vt),{role:h=qt,roleDescription:v="draggable",tabIndex:g=0}=null!=i?i:{},m=(null==c?void 0:c.id)===t,b=(0,o.useContext)(m?Wt:Gt),[y,w]=de(),[x,C]=de(),E=function(e,t){return(0,o.useMemo)((()=>e.reduce(((e,n)=>{let{eventName:r,handler:o}=n;return e[r]=e=>{o(e,t)},e}),{})),[e,t])}(l,t),S=ce(n);return le((()=>(f.set(t,{id:t,key:a,node:y,activatorNode:x,data:S}),()=>{const e=f.get(t);e&&e.key===a&&f.delete(t)})),[f,t]),{active:c,activatorEvent:s,activeNodeRect:u,attributes:(0,o.useMemo)((()=>({role:h,tabIndex:g,"aria-disabled":r,"aria-pressed":!(!m||h!==qt)||void 0,"aria-roledescription":v,"aria-describedby":d.draggable})),[r,h,g,m,v,d.draggable]),isDragging:m,listeners:r?void 0:E,node:y,over:p,setNodeRef:w,setActivatorNodeRef:C,transform:b}}({id:l,data:C,attributes:{...pn,...n},disabled:w.draggable}),P=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.useMemo)((()=>e=>{t.forEach((t=>t(e)))}),t)}(R,B),F=Boolean(I),z=F&&!v&&nn(p)&&nn(m),V=!b&&M,H=V&&z?A:null,U=z?null!=H?H:(null!=s?s:y)({rects:g,activeNodeRect:_,activeIndex:p,overIndex:m,index:x}):null,K=nn(p)&&nn(m)?a({id:l,items:d,activeIndex:p,overIndex:m}):x,$=null==I?void 0:I.id,W=(0,o.useRef)({activeId:$,items:d,newIndex:K,containerId:f}),Y=d!==W.current.items,X=t({active:I,containerId:f,isDragging:M,isSorting:F,id:l,index:x,items:d,newIndex:W.current.newIndex,previousItems:W.current.items,previousContainerId:W.current.containerId,transition:u,wasDragging:null!=W.current.activeId}),G=function(e){let{disabled:t,index:n,node:r,rect:i}=e;const[a,l]=(0,o.useState)(null),s=(0,o.useRef)(n);return le((()=>{if(!t&&n!==s.current&&r.current){const e=i.current;if(e){const t=ze(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&l(n)}}n!==s.current&&(s.current=n)}),[t,n,r,i]),(0,o.useEffect)((()=>{a&&l(null)}),[a]),a}({disabled:!X,index:x,node:k,rect:S});return(0,o.useEffect)((()=>{F&&W.current.newIndex!==K&&(W.current.newIndex=K),f!==W.current.containerId&&(W.current.containerId=f),d!==W.current.items&&(W.current.items=d)}),[F,K,f,d]),(0,o.useEffect)((()=>{if($===W.current.activeId)return;if($&&!W.current.activeId)return void(W.current.activeId=$);const e=setTimeout((()=>{W.current.activeId=$}),50);return()=>clearTimeout(e)}),[$]),{active:I,activeIndex:p,attributes:O,data:C,rect:S,index:x,newIndex:K,items:d,isOver:D,isSorting:F,isDragging:M,listeners:T,node:k,overIndex:m,over:j,setNodeRef:P,setActivatorNodeRef:L,setDroppableNodeRef:R,setDraggableNodeRef:B,transform:null!=G?G:U,transition:G||Y&&W.current.newIndex===x?fn:V&&!be(N)||!u?void 0:F||X?we.Transition.toString({...u,property:dn}):void 0}}function vn({field:e,setAttributes:t,fieldName:n,attributes:r,editProps:i}){const l=e=>{const o=[...r[n]];o.splice(e,1),t({[n]:o})},s=e=>e===r[n].length-1,c=e=>0===e,d=e=>{if(c(e))return;const o=[...r[n]],i=o[e];o[e]=o[e-1],o[e-1]=i,t({[n]:o})},f=e=>{if(s(e))return;const o=[...r[n]],i=o[e];o[e]=o[e+1],o[e+1]=i,t({[n]:o})};return(0,o.createElement)(a.BaseControl,{label:e.label,className:"fbl_repeater-inputs"},(0,o.createElement)("div",{className:"fbl_repeater-inputs__inner"},(0,o.createElement)(Xt,{onDragEnd:({active:e,over:o})=>{if(o&&e.id!==o?.id){const a=r[n].findIndex((({fastBlockId:t})=>t===e.id)),l=r[n].findIndex((({fastBlockId:e})=>e===o.id));i=en(r[n],a,l),t({[n]:i})}var i}},(0,o.createElement)(ln,{items:r[n].map((e=>e.fastBlockId))},r[n].map(((t,r)=>{const a={attribute:t,fieldName:n,index:r,field:e,moveUp:d,isFirst:c,moveDown:f,isLast:s,removeItem:l,editProps:i};return(0,o.createElement)(gn,{key:t.fastBlockId?`${n}_${t.fastBlockId}`:`${n}_${r}`,...a})})))),(!e.limit||e.limit>r[n].length)&&(0,o.createElement)(a.Button,{className:"fbl_repeater-inputs__appender",icon:Y,onClick:()=>{const o={};Object.entries(e.query).forEach((([e,t])=>{o[e]=t.default})),o.fastBlockId=(new Date).valueOf(),console.log(o),t({[n]:[...r[n],o]})},style:{width:"100%",justifyContent:"center",height:48},variant:"secondary","aria-label":(0,u.__)("Add Item")})))}function gn({attribute:e,fieldName:t,index:n,field:r,moveUp:i,isFirst:l,moveDown:s,isLast:d,removeItem:f,editProps:p}){const{attributes:v,listeners:g,setNodeRef:m,transform:b,transition:y}=hn({id:e.fastBlockId}),w={transform:we.Translate.toString(b),transition:y},[x,C]=(0,c.useState)(!1);return(0,o.createElement)(a.Card,{ref:m,style:w},(0,o.createElement)("div",{className:"fbl_repeater-card__header",onClick:()=>{C(!x)}},(0,o.createElement)(X,{icon:G,className:"fbl_repeater-card__drag-handle",...v,...g}),(0,o.createElement)("span",{className:"fbl_repeater-card__title"},r.single?`${r.single} ${n+1}`:`Repeater ${(0,u.__)("Item")} ${n+1}`),(0,o.createElement)("div",{style:{display:"flex",marginLeft:"auto"}},x&&(0,o.createElement)("div",{style:{display:"flex",flexDirection:"column"}},(0,o.createElement)(a.Button,{onClick:e=>{e.stopPropagation(),i(n)},disabled:l(n),icon:q,style:{height:18}}),(0,o.createElement)(a.Button,{onClick:e=>{e.stopPropagation(),s(n)},disabled:d(n),icon:Z,style:{height:18}})),(0,o.createElement)(a.Button,{onClick:e=>{e.stopPropagation(),f(n)},icon:h}),(0,o.createElement)(a.Button,{icon:x?q:Z,onClick:()=>{C(!x)}}))),x&&(0,o.createElement)(a.CardBody,{initialOpen:!1},Object.entries(e).map((([e])=>{if(r.query[e]){const i={editProps:p,fieldName:t,field:r,subFieldName:e,subField:r.query[e],indexKey:n};return(0,o.createElement)(W,{...i})}}))))}function mn({editProps:e,fieldName:n,field:o}){const{attributes:i,setAttributes:l}=e,s=e=>{l({[n]:e})},c=()=>{s(void 0)};if("repeater"===o.input){const t={field:o,setAttributes:l,fieldName:n,attributes:i,editProps:e};return(0,r.jsx)(vn,{...t})}return(0,r.jsx)(r.Fragment,{children:(()=>{const e=K[o.input],l=()=>(0,r.jsx)(e,{setFieldAttributes:s,removeFieldAttributes:c,field:o,label:o.label,value:i[n]});if(void 0===e)return o.input&&console.error(o.input+" Input does not exist inside field "+n),null;const u=o.width||1;return"inspector"===o.location?(0,r.jsx)(t.InspectorControls,{children:(0,r.jsx)(a.PanelBody,{children:l()})}):(0,r.jsx)($,{width:u,children:l()})})()})}at.Down,at.Right,at.Up,at.Left;const bn=(0,r.jsx)(f.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(f.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})});function yn({title:e,fields:t,editProps:n,isSelected:r}){const[i,l]=(0,c.useState)(!1),s=()=>{l((()=>!1))},u=r?" is-selected":"";return(0,o.createElement)("div",{className:"fbl_edit-btn-overlay"+u},Object.entries(t).filter((([e,t])=>"inspector"===t.location)).map((([e,t])=>{const r={editProps:n,fieldName:e,field:t};return(0,o.createElement)(mn,{...r})})),(0,o.createElement)(a.Button,{isPrimary:!0,icon:bn,onClick:()=>{l((()=>!0))}}),i&&(0,o.createElement)(a.Modal,{title:"Block: "+e,onRequestClose:s,style:{width:600},shouldCloseOnClickOutside:!1,overlayClassName:"fbl_edit-overlay"},Object.entries(t).filter((([e,t])=>"inspector"!==t.location)).map((([e,t])=>{const r={editProps:n,fieldName:e,field:t};return(0,o.createElement)(mn,{...r})})),(0,o.createElement)("div",{style:{textAlign:"right",marginTop:"2rem"}},(0,o.createElement)(a.Button,{isPrimary:!0,onClick:s},"Okay"))))}const wn=(0,r.jsx)(f.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)(f.Path,{d:"M19 8h-1V6h-5v2h-2V6H6v2H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zm.5 10c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5v-8c0-.3.2-.5.5-.5h14c.3 0 .5.2.5.5v8z"})}),xn=({children:e,fields:n})=>({attributes:o})=>e?(0,r.jsx)(t.InnerBlocks.Content,{}):(0,r.jsx)("div",{children:Object.entries(n).map((([e,n])=>{switch(n.input){case"text":case"textarea":if("string"==typeof n.selector){const t=n.selector;return(0,r.jsx)(t,{children:o[e]})}return(0,r.jsx)("p",{children:o[e]});case"image":return(0,r.jsx)("img",{src:"object"==typeof o[e]&&o[e].url,alt:"object"==typeof o[e]&&o[e].alt});case"richText":return(0,r.jsx)(t.RichText.Content,{tagName:"p",value:o[e]});default:return null}}))}),Cn=({attributes:e,children:t,fields:n,settings:r})=>[{attributes:e,...r,save:xn({children:t,fields:n}),apiVersion:1}];Object.values(fastBlockBlocks).forEach((n=>{!function(n){const{name:i,settings:l,children:u,allowTransformFrom:d}=n,f=n.fields||[],p={};for(const[e,t]of Object.entries(f)){const n={};n.type=t.type,n.default=t.default,p[e]=n}const h=function({settings:e,name:n,children:r,fields:i,editWidth:l,editView:u,childrenLimit:d,preview:f}){return p=>{const{attributes:h,isSelected:v,clientId:g}=p,[m,b]=(0,c.useState)(0),y=(0,t.useBlockProps)({style:{flexBasis:100*l+"%"}}),w=e&&e.title?e.title:n,x="popover"===u||"inspector"===u,C=(0,U.useSelect)((e=>e("core/block-editor").getBlock(g).innerBlocks)).length,E=(!d||C<d)&&t.InnerBlocks.ButtonBlockAppender;function S(e){return Object.entries(i).map((([t,n])=>{const r={editProps:e,fieldName:t,field:n};return(0,o.createElement)(mn,{...r})}))}return(0,o.createElement)("div",{...y},(0,o.createElement)("div",{className:"fbl_editor-block",style:{minHeight:m},onMouseDown:e=>{if(v)return;e.currentTarget.style.minHeight=null;const t=e.currentTarget.offsetHeight;e.currentTarget.style.minHeight=t+"px",b(t)},onBlur:()=>{b(0)}},v&&!x||r||!1===f?(0,o.createElement)(a.Card,{className:"fbl_card",size:"small"},(0,o.createElement)(a.CardHeader,{className:"fbl_block-title"},(0,o.createElement)(X,{icon:wn}),"Block: ",w),(0,o.createElement)(a.CardBody,{className:"fbl_card__body"},(0,o.createElement)("div",{className:"fbl_card__content-wrapper"},S(p)),r&&(0,o.createElement)("div",{className:"fbl_card__inner-blocks-wrapper"},(0,o.createElement)(t.InnerBlocks,{allowedBlocks:Array.isArray(r)?r:void 0,orientation:"horizontal",renderAppender:E})))):(0,o.createElement)("div",{style:{border:"1px dashed #ddd",padding:0,minHeight:50}},"popover"===u&&(0,o.createElement)(yn,{title:w,fields:i,editProps:p,isSelected:v}),(0,o.createElement)("div",{className:"fbl_server-side-render"},(0,o.createElement)(s(),{block:n,attributes:{...h},httpMethod:"POST"})),v&&"inspector"===u&&(0,o.createElement)(t.InspectorControls,null,(0,o.createElement)(a.PanelBody,null,S(p))))))}}({fields:f,...n}),v=function({children:e,fields:n}){return({attributes:o,className:i})=>{const a=t.useBlockProps.save({className:i});return e?(0,r.jsx)(t.InnerBlocks.Content,{}):(0,r.jsx)("div",{...a,children:Object.entries(n).map((([e,n])=>{switch(n.input){case"text":case"textarea":if("string"==typeof n.selector){const t=n.selector;return(0,r.jsx)(t,{children:o[e]})}return(0,r.jsx)("p",{children:o[e]});case"image":return(0,r.jsx)("img",{src:"object"==typeof o[e]&&o[e].url,alt:"object"==typeof o[e]&&o[e].alt});case"richText":case"classicEditor":return(0,r.jsx)(t.RichText.Content,{value:o[e]});default:return null}}))})}}({children:u,fields:f});d&&(l.transforms={from:[{type:"block",blocks:d,transform:(t,n)=>(0,e.createBlock)(i,t,n)}]});const g={apiVersion:2,edit:h,save:v,title:i,...l,attributes:p,deprecated:Cn({attributes:p,children:u,fields:f,settings:l})};(0,e.registerBlockType)(i,g)}(n)}))})()})();