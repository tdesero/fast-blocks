(()=>{var e={694:(e,t,n)=>{"use strict";var r=n(925);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},556:(e,t,n)=>{e.exports=n(694)()},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},20:(e,t,n)=>{"use strict";var r=n(609),o=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:s,_owner:a.current}}},848:(e,t,n)=>{"use strict";e.exports=n(20)},609:e=>{"use strict";e.exports=window.React}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.blocks;var t=n(609),r=n.n(t);const o=window.wp.blockEditor,i=window.wp.components,a=window.wp.serverSideRender;var l=n.n(a);const s=window.wp.element,c=window.wp.i18n;function u(e=""){return function(e){return e.replace(/<[^>]*>?/gm,"")}(e).split("").length}const d=window.wp.primitives;var f=n(848);const p=(0,f.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)(d.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})}),h=(0,f.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,f.jsx)(d.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),v=({label:e,onSelect:n,onRemove:r,value:a,field:l})=>(0,t.createElement)(o.MediaUploadCheck,null,(0,t.createElement)(o.MediaUpload,{onSelect:e=>{console.log(e),n({id:e.id,sizes:e.sizes,url:e.url,alt:e.alt,title:e.title,description:e.description,caption:e.caption,width:e.width,height:e.height,...l.focalPointPicker?{focalPoint:{x:.5,y:.5}}:{}})},allowedTypes:["image"],value:a,render:({open:o})=>(0,t.createElement)(i.BaseControl,{label:e},(0,t.createElement)("div",{style:{maxWidth:240}},a&&a.url?l.focalPointPicker?(0,t.createElement)(t.Fragment,null,(0,t.createElement)(i.FocalPointPicker,{url:a.url,value:a.focalPoint,onChange:e=>n({...a,focalPoint:e})}),(0,t.createElement)(i.Button,{variant:"tertiary",onClick:o},(0,c.__)("Replace")),(0,t.createElement)(i.Button,{variant:"tertiary",isDestructive:!0,onClick:r},(0,c.__)("Remove"))):(0,t.createElement)("div",{className:"fbl_img-preview-box"},(0,t.createElement)("img",{onClick:o,src:a.url,className:"fbl_img-preview-box__img"}),(0,t.createElement)(i.Button,{className:"fbl_img-preview-box__btn",variant:"secondary",isDestructive:!0,onClick:r,icon:h})):(0,t.createElement)(i.Placeholder,{icon:p,label:(0,c.__)("Add Image")},(0,t.createElement)(i.Button,{onClick:o,variant:"primary"},(0,c.__)("Open Media Library")))))})),m=(0,f.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)(d.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12.848 8a1 1 0 0 1-.914-.594l-.723-1.63a.5.5 0 0 0-.447-.276H5a.5.5 0 0 0-.5.5v11.5a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5v-9A.5.5 0 0 0 19 8h-6.152Zm.612-1.5a.5.5 0 0 1-.462-.31l-.445-1.084A2 2 0 0 0 10.763 4H5a2 2 0 0 0-2 2v11.5a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2h-5.54Z"})}),g=({label:e,onSelect:n,onRemove:r,value:a,field:l})=>(0,t.createElement)(o.MediaUploadCheck,null,(0,t.createElement)(o.MediaUpload,{allowedTypes:l.allowedTypes,onSelect:e=>{console.log(e),n({filename:e.filename,id:e.id,sizes:e.sizes,url:e.url,alt:e.alt,title:e.title,description:e.description,caption:e.caption})},value:a,render:({open:n})=>(0,t.createElement)(i.BaseControl,{label:e},(0,t.createElement)("div",{style:{maxWidth:240}},a&&a.url?(0,t.createElement)("div",{style:{display:"inline-flex",gap:8}},(0,t.createElement)(i.Button,{variant:"secondary",isOutline:!0,onClick:n},a.filename),(0,t.createElement)(i.Button,{variant:"tertiary",onClick:r,icon:h})):(0,t.createElement)(i.Placeholder,{icon:m,label:(0,c.__)("File")},(0,t.createElement)(i.Button,{onClick:n,variant:"primary"},(0,c.__)("Open Media Library")))))})),b=({children:e})=>(0,t.createElement)(i.SlotFillProvider,null,e,(0,t.createElement)(i.Slot,{name:"RichText.Toolbar"})),y=window.wp.compose;var w,E,C,x=n(556),S=function(){return S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},S.apply(this,arguments)},k={onActivate:x.func,onAddUndo:x.func,onBeforeAddUndo:x.func,onBeforeExecCommand:x.func,onBeforeGetContent:x.func,onBeforeRenderUI:x.func,onBeforeSetContent:x.func,onBeforePaste:x.func,onBlur:x.func,onChange:x.func,onClearUndos:x.func,onClick:x.func,onContextMenu:x.func,onCommentChange:x.func,onCompositionEnd:x.func,onCompositionStart:x.func,onCompositionUpdate:x.func,onCopy:x.func,onCut:x.func,onDblclick:x.func,onDeactivate:x.func,onDirty:x.func,onDrag:x.func,onDragDrop:x.func,onDragEnd:x.func,onDragGesture:x.func,onDragOver:x.func,onDrop:x.func,onExecCommand:x.func,onFocus:x.func,onFocusIn:x.func,onFocusOut:x.func,onGetContent:x.func,onHide:x.func,onInit:x.func,onInput:x.func,onKeyDown:x.func,onKeyPress:x.func,onKeyUp:x.func,onLoadContent:x.func,onMouseDown:x.func,onMouseEnter:x.func,onMouseLeave:x.func,onMouseMove:x.func,onMouseOut:x.func,onMouseOver:x.func,onMouseUp:x.func,onNodeChange:x.func,onObjectResizeStart:x.func,onObjectResized:x.func,onObjectSelected:x.func,onPaste:x.func,onPostProcess:x.func,onPostRender:x.func,onPreProcess:x.func,onProgressState:x.func,onRedo:x.func,onRemove:x.func,onReset:x.func,onSaveContent:x.func,onSelectionChange:x.func,onSetAttrib:x.func,onSetContent:x.func,onShow:x.func,onSubmit:x.func,onUndo:x.func,onVisualAid:x.func,onSkinLoadError:x.func,onThemeLoadError:x.func,onModelLoadError:x.func,onPluginLoadError:x.func,onIconsLoadError:x.func,onLanguageLoadError:x.func,onScriptsLoad:x.func,onScriptsLoadError:x.func},R=S({apiKey:x.string,licenseKey:x.string,id:x.string,inline:x.bool,init:x.object,initialValue:x.string,onEditorChange:x.func,value:x.string,tagName:x.string,tabIndex:x.number,cloudChannel:x.string,plugins:x.oneOfType([x.string,x.array]),toolbar:x.oneOfType([x.string,x.array]),disabled:x.bool,textareaName:x.string,tinymceScriptSrc:x.oneOfType([x.string,x.arrayOf(x.string),x.arrayOf(x.shape({src:x.string,async:x.bool,defer:x.bool}))]),rollback:x.oneOfType([x.number,x.oneOf([!1])]),scriptLoading:x.shape({async:x.bool,defer:x.bool,delay:x.number})},k),D=function(e){return"function"==typeof e},I=function(e){return e in k},_=function(e){return e.substr(2)},N=function(e,t,n,r,o){return function(t,n,r,o,i,a,l){var s=Object.keys(i).filter(I),c=Object.keys(a).filter(I),u=s.filter((function(e){return void 0===a[e]})),d=c.filter((function(e){return void 0===i[e]}));u.forEach((function(e){var t=_(e),n=l[t];r(t,n),delete l[t]})),d.forEach((function(r){var o=function(t,n){return function(r){var o;return null===(o=t(n))||void 0===o?void 0:o(r,e)}}(t,r),i=_(r);l[i]=o,n(i,o)}))}(o,e.on.bind(e),e.off.bind(e),0,t,n,r)},O=0,B=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++O+String(t)},T=function(e){return null!==e&&("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase())},M=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},L=function(e,t){void 0!==e&&(null!=e.mode&&"object"==typeof e.mode&&"function"==typeof e.mode.set?e.mode.set(t):e.setMode(t))},A=function(){return A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},A.apply(this,arguments)},P=function(e,t,n){var r,o,i=e.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=t.id,i.src=t.src,i.async=null!==(r=t.async)&&void 0!==r&&r,i.defer=null!==(o=t.defer)&&void 0!==o&&o;var a=function(){i.removeEventListener("load",a),i.removeEventListener("error",l),n(t.src)},l=function(e){i.removeEventListener("load",a),i.removeEventListener("error",l),n(t.src,e)};i.addEventListener("load",a),i.addEventListener("error",l),e.head&&e.head.appendChild(i)},j=(w=[],E=function(e){var t=w.find((function(t){return t.getDocument()===e}));return void 0===t&&(t=function(e){var t={},n=function(e,n){var r=t[e];r.done=!0,r.error=n;for(var o=0,i=r.handlers;o<i.length;o++)(0,i[o])(e,n);r.handlers=[]};return{loadScripts:function(r,o,i){var a=function(e){return void 0!==i?i(e):console.error(e)};if(0!==r.length)for(var l=0,s=!1,c=function(e,t){s||(t?(s=!0,a(t)):++l===r.length&&o())},u=0,d=r;u<d.length;u++){var f=d[u],p=t[f.src];if(p)p.done?c(f.src,p.error):p.handlers.push(c);else{var h=B("tiny-");t[f.src]={id:h,src:f.src,done:!1,error:null,handlers:[c]},P(e,A({id:h},f),n)}}else a(new Error("At least one script must be provided"))},deleteScripts:function(){for(var n,r=0,o=Object.values(t);r<o.length;r++){var i=o[r],a=e.getElementById(i.id);null!=a&&"SCRIPT"===a.tagName&&(null===(n=a.parentNode)||void 0===n||n.removeChild(a))}t={}},getDocument:function(){return e}}}(e),w.push(t)),t},{loadList:function(e,t,n,r,o){var i=function(){return E(e).loadScripts(t,r,o)};n>0?setTimeout(i,n):i()},reinitialize:function(){for(var e=w.pop();null!=e;e=w.pop())e.deleteScripts()}}),F=function(e){var t=e;return t&&t.tinymce?t.tinymce:null},z=(C=function(e,t){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},C(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),V=function(){return V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},V.apply(this,arguments)},H=function(e){function n(n){var r,o,i,a=e.call(this,n)||this;return a.rollbackTimer=void 0,a.valueCursor=void 0,a.rollbackChange=function(){var e=a.editor,t=a.props.value;e&&t&&t!==a.currentContent&&e.undoManager.ignore((function(){if(e.setContent(t),a.valueCursor&&(!a.inline||e.hasFocus()))try{e.selection.moveToBookmark(a.valueCursor)}catch(e){}})),a.rollbackTimer=void 0},a.handleBeforeInput=function(e){if(void 0!==a.props.value&&a.props.value===a.currentContent&&a.editor&&(!a.inline||a.editor.hasFocus()))try{a.valueCursor=a.editor.selection.getBookmark(3)}catch(e){}},a.handleBeforeInputSpecial=function(e){"Enter"!==e.key&&"Backspace"!==e.key&&"Delete"!==e.key||a.handleBeforeInput(e)},a.handleEditorChange=function(e){var t=a.editor;if(t&&t.initialized){var n=t.getContent();void 0!==a.props.value&&a.props.value!==n&&!1!==a.props.rollback&&(a.rollbackTimer||(a.rollbackTimer=window.setTimeout(a.rollbackChange,"number"==typeof a.props.rollback?a.props.rollback:200))),n!==a.currentContent&&(a.currentContent=n,D(a.props.onEditorChange)&&a.props.onEditorChange(n,t))}},a.handleEditorChangeSpecial=function(e){"Backspace"!==e.key&&"Delete"!==e.key||a.handleEditorChange(e)},a.initialise=function(e){var t,n,r;void 0===e&&(e=0);var o=a.elementRef.current;if(o)if(function(e){if(!("isConnected"in Node.prototype)){for(var t=e,n=e.parentNode;null!=n;)n=(t=n).parentNode;return t===e.ownerDocument}return e.isConnected}(o)){var i=F(a.view);if(!i)throw new Error("tinymce should have been loaded into global scope");var l,s,c=V(V(V(V({},a.props.init),{selector:void 0,target:o,readonly:a.props.disabled,inline:a.inline,plugins:(l=null===(t=a.props.init)||void 0===t?void 0:t.plugins,s=a.props.plugins,M(l).concat(M(s))),toolbar:null!==(n=a.props.toolbar)&&void 0!==n?n:null===(r=a.props.init)||void 0===r?void 0:r.toolbar}),a.props.licenseKey?{license_key:a.props.licenseKey}:{}),{setup:function(e){a.editor=e,a.bindHandlers({}),a.inline&&!T(o)&&e.once("PostRender",(function(t){e.setContent(a.getInitialValue(),{no_events:!0})})),a.props.init&&D(a.props.init.setup)&&a.props.init.setup(e)},init_instance_callback:function(e){var t,n,r=a.getInitialValue();a.currentContent=null!==(t=a.currentContent)&&void 0!==t?t:e.getContent(),a.currentContent!==r&&(a.currentContent=r,e.setContent(r),e.undoManager.clear(),e.undoManager.add(),e.setDirty(!1));var o=null!==(n=a.props.disabled)&&void 0!==n&&n;L(a.editor,o?"readonly":"design"),a.props.init&&D(a.props.init.init_instance_callback)&&a.props.init.init_instance_callback(e)}});a.inline||(o.style.visibility=""),T(o)&&(o.value=a.getInitialValue()),i.init(c)}else if(0===e)setTimeout((function(){return a.initialise(1)}),1);else{if(!(e<100))throw new Error("tinymce can only be initialised when in a document");setTimeout((function(){return a.initialise(e+1)}),100)}},a.id=a.props.id||B("tiny-react"),a.elementRef=t.createRef(),a.inline=null!==(i=null!==(r=a.props.inline)&&void 0!==r?r:null===(o=a.props.init)||void 0===o?void 0:o.inline)&&void 0!==i&&i,a.boundHandlers={},a}return z(n,e),Object.defineProperty(n.prototype,"view",{get:function(){var e,t;return null!==(t=null===(e=this.elementRef.current)||void 0===e?void 0:e.ownerDocument.defaultView)&&void 0!==t?t:window},enumerable:!1,configurable:!0}),n.prototype.componentDidUpdate=function(e){var t,n,r=this;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(e),this.editor.initialized)){if(this.currentContent=null!==(t=this.currentContent)&&void 0!==t?t:this.editor.getContent(),"string"==typeof this.props.initialValue&&this.props.initialValue!==e.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if("string"==typeof this.props.value&&this.props.value!==this.currentContent){var o=this.editor;o.undoManager.transact((function(){var e;if(!r.inline||o.hasFocus())try{e=o.selection.getBookmark(3)}catch(e){}var t=r.valueCursor;if(o.setContent(r.props.value),!r.inline||o.hasFocus())for(var n=0,i=[e,t];n<i.length;n++){var a=i[n];if(a)try{o.selection.moveToBookmark(a),r.valueCursor=a;break}catch(e){}}}))}if(this.props.disabled!==e.disabled){var i=null!==(n=this.props.disabled)&&void 0!==n&&n;L(this.editor,i?"readonly":"design")}}},n.prototype.componentDidMount=function(){var e,t,n,r,o,i=this;null!==F(this.view)?this.initialise():Array.isArray(this.props.tinymceScriptSrc)&&0===this.props.tinymceScriptSrc.length?null===(t=(e=this.props).onScriptsLoadError)||void 0===t||t.call(e,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array.")):(null===(n=this.elementRef.current)||void 0===n?void 0:n.ownerDocument)&&j.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),null!==(o=null===(r=this.props.scriptLoading)||void 0===r?void 0:r.delay)&&void 0!==o?o:0,(function(){var e,t;null===(t=(e=i.props).onScriptsLoad)||void 0===t||t.call(e),i.initialise()}),(function(e){var t,n;null===(n=(t=i.props).onScriptsLoadError)||void 0===n||n.call(t,e)}))},n.prototype.componentWillUnmount=function(){var e=this,t=this.editor;t&&(t.off(this.changeEvents(),this.handleEditorChange),t.off(this.beforeInputEvent(),this.handleBeforeInput),t.off("keypress",this.handleEditorChangeSpecial),t.off("keydown",this.handleBeforeInputSpecial),t.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach((function(n){t.off(n,e.boundHandlers[n])})),this.boundHandlers={},t.remove(),this.editor=void 0)},n.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},n.prototype.changeEvents=function(){var e,t,n;return(null===(n=null===(t=null===(e=F(this.view))||void 0===e?void 0:e.Env)||void 0===t?void 0:t.browser)||void 0===n?void 0:n.isIE())?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},n.prototype.beforeInputEvent=function(){return window.InputEvent&&"function"==typeof InputEvent.prototype.getTargetRanges?"beforeinput SelectionChange":"SelectionChange"},n.prototype.renderInline=function(){var e=this.props.tagName,n=void 0===e?"div":e;return t.createElement(n,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},n.prototype.renderIframe=function(){return t.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},n.prototype.getScriptSources=function(){var e,t,n=null===(e=this.props.scriptLoading)||void 0===e?void 0:e.async,r=null===(t=this.props.scriptLoading)||void 0===t?void 0:t.defer;if(void 0!==this.props.tinymceScriptSrc)return"string"==typeof this.props.tinymceScriptSrc?[{src:this.props.tinymceScriptSrc,async:n,defer:r}]:this.props.tinymceScriptSrc.map((function(e){return"string"==typeof e?{src:e,async:n,defer:r}:e}));var o=this.props.cloudChannel,i=this.props.apiKey?this.props.apiKey:"no-api-key";return[{src:"https://cdn.tiny.cloud/1/".concat(i,"/tinymce/").concat(o,"/tinymce.min.js"),async:n,defer:r}]},n.prototype.getInitialValue=function(){return"string"==typeof this.props.initialValue?this.props.initialValue:"string"==typeof this.props.value?this.props.value:""},n.prototype.bindHandlers=function(e){var t=this;if(void 0!==this.editor){N(this.editor,e,this.props,this.boundHandlers,(function(e){return t.props[e]}));var n=function(e){return void 0!==e.onEditorChange||void 0!==e.value},r=n(e),o=n(this.props);!r&&o?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):r&&!o&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},n.propTypes=R,n.defaultProps={cloudChannel:"7"},n}(t.Component);const U=window.wp.data,K=(window.wp.tinymce,({value:e,colorMap:n,setFieldAttributes:r})=>(0,t.createElement)(H,{onEditorChange:e=>{r(e)},value:e,plugins:"lists textcolor colorpicker link",init:{height:300,menubar:!1,branding:!1,textcolor_map:n,toolbar:"undo redo formatselect bold italic forecolor backcolor alignleft aligncenter alignright alignjustify bullist numlist outdent indent link unlink removeformat help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}})),W={checkbox:function({value:e,label:n,setFieldAttributes:r}){return(0,t.createElement)(i.CheckboxControl,{label:n,onChange:r,checked:e})},toggle:function({value:e,label:n,setFieldAttributes:r}){return(0,t.createElement)(i.ToggleControl,{label:n,onChange:r,checked:e})},text:function({value:e,label:n,setFieldAttributes:r,field:o}){const[a,l]=(0,s.useState)(u(e));(0,s.useEffect)((()=>{l(u(e))}));const d=o.charLimit?`${(0,c.__)("Characters")}: ${a} / ${o.charLimit}`:void 0,f=!(o.charLimit&&a>o.charLimit);return(0,t.createElement)(i.TextControl,{className:f?"":"components-base-control--error",label:n,help:d,value:e,onChange:r})},email:function({value:e,label:n,setFieldAttributes:r}){const[o,a]=(0,s.useState)(!0);return(0,t.createElement)(i.TextControl,{type:"email",className:o?"":"components-base-control--error",label:n,value:e,onChange:r,onFocus:e=>{e.target.reportValidity()},onBlur:e=>{const t=e.target.checkValidity();a(t)}})},textarea:function({value:e,label:n,setFieldAttributes:r,field:o}){const[a,l]=(0,s.useState)(u(e));(0,s.useEffect)((()=>{l(u(e))}));const d=o.charLimit?`${(0,c.__)("Characters")}: ${a} / ${o.charLimit}`:void 0,f=!(o.charLimit&&a>o.charLimit);return(0,t.createElement)(i.TextareaControl,{className:f?"":"components-base-control--error",label:n,help:d,value:e,onChange:r})},number:function({value:e,label:n,setFieldAttributes:r}){return(0,t.createElement)(i.TextControl,{type:"number",label:n,value:e,onChange:r})},range:function({value:e,field:n,label:r,setFieldAttributes:o}){return(0,t.createElement)(i.RangeControl,{label:r,value:e,onChange:o,step:n.step,min:n.min,max:n.max})},select:function({value:e,field:n,label:r,setFieldAttributes:o}){return(0,t.createElement)(i.SelectControl,{label:r,value:e,onChange:o,options:n.options})},image:function({label:e,value:n,setFieldAttributes:r,removeFieldAttributes:o,field:i}){return(0,t.createElement)(v,{onSelect:r,onRemove:o,value:n,label:e,field:i})},file:function({label:e,value:n,field:r,setFieldAttributes:o,removeFieldAttributes:i}){return(0,t.createElement)(g,{onSelect:o,onRemove:i,value:n,label:e,field:r})},richText:function({value:e,label:n,setFieldAttributes:r,field:a}){const[l,d]=(0,s.useState)(u(e));(0,s.useEffect)((()=>{d(u(e))}));const f=a.charLimit?`${(0,c.__)("Characters")}: ${l} / ${a.charLimit}`:void 0,p=!(a.charLimit&&l>a.charLimit);return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(i.BaseControl,{label:n,className:p?"":"components-base-control--error"},(0,t.createElement)(b,null,(0,t.createElement)(o.RichText,{className:"fbl_rich-text",value:e,allowedFormats:a.allowedFormats,onChange:r,placeholder:(0,c.__)("Add text…"),inlineToolbar:!0})),(0,t.createElement)(i.Fill,{name:"RichText.Toolbar"},(0,t.createElement)(o.BlockControls,null))),a.charLimit&&(0,t.createElement)("p",{style:{fontStyle:"normal",color:"rgb(117, 117, 117)",fontSize:12}},f))},url:function({value:e,label:n,setFieldAttributes:r}){return(0,t.createElement)(i.BaseControl,{label:n},(0,t.createElement)("div",{className:"fbl_url-input"},(0,t.createElement)(o.URLInputButton,{url:e,onChange:r}),(0,t.createElement)("small",{className:"fbl_url-input__url"},e)))},date:function({value:e,label:n,setFieldAttributes:r}){const o=(0,y.withState)({isVisible:!1})((({isVisible:n,setState:r,children:o})=>(0,t.createElement)("div",{style:{position:"relative"}},(0,t.createElement)(i.Button,{isSecondary:!0,onClick:n?null:()=>{r((()=>({isVisible:!0})))}},e?new Date(e).toLocaleString():(0,c.__)("Date")),n&&(0,t.createElement)(i.Popover,{onClose:()=>{r((()=>({isVisible:!1})))},position:"bottom left"},o))));return(0,t.createElement)(i.BaseControl,{className:"fbl_url-input"},(0,t.createElement)(i.BaseControl,{className:"fbl_url-input__label",label:n}),(0,t.createElement)(o,null,(0,t.createElement)("div",{style:{padding:10}},(0,t.createElement)(i.DateTimePicker,{currentDate:e,onChange:e=>{e||(e=""),r(e)}}))))},classicEditor:({value:e,label:n,setFieldAttributes:r,field:o,editView:a})=>{const l=(0,U.select)("core/block-editor").getSettings().colors,d=[],[f,p]=(0,s.useState)(u(e)),[h,v]=(0,s.useState)(!1);l.forEach((e=>{d.push(e.color.substring(1)),d.push(e.slug)})),(0,s.useEffect)((()=>{p(u(e))}));const m=o.charLimit?`${(0,c.__)("Characters")}: ${f} / ${o.charLimit}`:void 0,g=!(o.charLimit&&f>o.charLimit),{deviceType:b}=(0,U.useSelect)((e=>{const{__experimentalGetPreviewDeviceType:t}=e("core/edit-post");return{deviceType:t?t():void 0}}),[]);return(0,t.createElement)(i.BaseControl,{label:n,className:g?"":"components-base-control--error"},"popover"===a||"inspector"===a||"Desktop"===b?(0,t.createElement)(K,{setFieldAttributes:r,value:e,colorMap:d}):(0,t.createElement)(i.Button,{variant:"primary",onClick:()=>v(!h)},(0,c.__)("Edit")),h&&(0,t.createElement)(i.Modal,{title:(0,c.__)("Edit"),onRequestClose:()=>v(!1),style:{width:600},shouldCloseOnClickOutside:!1,overlayClassName:"fbl_edit-overlay"},(0,t.createElement)(K,{setFieldAttributes:r,value:e,colorMap:d})),o.charLimit&&(0,t.createElement)("p",{style:{fontStyle:"normal",color:"rgb(117, 117, 117)",fontSize:12}},m))},postTypeEntry:function({value:e,label:n,setFieldAttributes:r,field:o}){const a=o.postType,l=(0,U.useSelect)((e=>e("core").getEntityRecords("postType",a,{per_page:-1}))),[c,u]=(0,s.useState)([]);return(0,s.useEffect)((()=>{if(l){const e=l.slice().map((e=>({value:e.id,label:e.title.rendered})));u(e)}}),[l]),(0,t.createElement)(i.ComboboxControl,{label:n,value:e,onChange:e=>{r(e||-1)},options:c})},colorPalette:function({value:e,field:n,label:r,setFieldAttributes:o}){return(0,t.createElement)(i.BaseControl,{label:r},(0,t.createElement)("div",{style:{maxWidth:240}},(0,t.createElement)(i.ColorPalette,{value:e.color,onChange:e=>{const t=n.colors.find((t=>t.color===e));o(t||{})},colors:n.colors.map((({color:e,name:t})=>({color:e,name:t})))})))},radio:function({value:e,field:n,label:r,setFieldAttributes:o}){return(0,t.createElement)(i.RadioControl,{label:r,selected:e,onChange:o,options:n.options})}},$=({children:e,width:n})=>{const r=100*parseFloat(n);return(0,t.createElement)("div",{style:{width:`${r}%`}},e)};function Y({editProps:e,fieldName:n,field:r,subFieldName:o,subField:i,indexKey:a}){const{attributes:l,setAttributes:s}=e,c=e=>{const t=l[n].slice(0,a),r=l[n].slice(a+1);s({[n]:[...t,{...l[n][a],[o]:e},...r]})},u=W[i.input];return(0,t.createElement)(u,{setFieldAttributes:c,removeFieldAttributes:()=>{c(void 0)},field:i,label:i.label,value:l[n][a][o]})}const G=(0,f.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,f.jsx)(d.Path,{d:"M10 1c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 16c-3.9 0-7-3.1-7-7s3.1-7 7-7 7 3.1 7 7-3.1 7-7 7zm1-11H9v3H6v2h3v3h2v-3h3V9h-3V6zM10 1c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 16c-3.9 0-7-3.1-7-7s3.1-7 7-7 7 3.1 7 7-3.1 7-7 7zm1-11H9v3H6v2h3v3h2v-3h3V9h-3V6z"})}),X=(0,s.forwardRef)((function({icon:e,size:t=24,...n},r){return(0,s.cloneElement)(e,{width:t,height:t,...n,ref:r})})),q=(0,f.jsx)(d.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,f.jsx)(d.Path,{d:"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z"})}),Z=(0,f.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)(d.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})}),J=(0,f.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)(d.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),Q=(0,f.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,f.jsx)(d.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z"})}),ee=window.ReactDOM,te="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function ne(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function re(e){return"nodeType"in e}function oe(e){var t,n;return e?ne(e)?e:re(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function ie(e){const{Document:t}=oe(e);return e instanceof t}function ae(e){return!ne(e)&&e instanceof oe(e).HTMLElement}function le(e){return e instanceof oe(e).SVGElement}function se(e){return e?ne(e)?e.document:re(e)?ie(e)?e:ae(e)||le(e)?e.ownerDocument:document:document:document}const ce=te?t.useLayoutEffect:t.useEffect;function ue(e){const n=(0,t.useRef)(e);return ce((()=>{n.current=e})),(0,t.useCallback)((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return null==n.current?void 0:n.current(...t)}),[])}function de(e,n){void 0===n&&(n=[e]);const r=(0,t.useRef)(e);return ce((()=>{r.current!==e&&(r.current=e)}),n),r}function fe(e,n){const r=(0,t.useRef)();return(0,t.useMemo)((()=>{const t=e(r.current);return r.current=t,t}),[...n])}function pe(e){const n=ue(e),r=(0,t.useRef)(null),o=(0,t.useCallback)((e=>{e!==r.current&&(null==n||n(e,r.current)),r.current=e}),[]);return[r,o]}function he(e){const n=(0,t.useRef)();return(0,t.useEffect)((()=>{n.current=e}),[e]),n.current}let ve={};function me(e,n){return(0,t.useMemo)((()=>{if(n)return n;const t=null==ve[e]?0:ve[e]+1;return ve[e]=t,e+"-"+t}),[e,n])}function ge(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce(((t,n)=>{const r=Object.entries(n);for(const[n,o]of r){const r=t[n];null!=r&&(t[n]=r+e*o)}return t}),{...t})}}const be=ge(1),ye=ge(-1);function we(e){if(!e)return!1;const{KeyboardEvent:t}=oe(e.target);return t&&e instanceof t}function Ee(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=oe(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const Ce=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ce.Translate.toString(e),Ce.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),xe="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Se(e){return e.matches(xe)?e:e.querySelector(xe)}const ke={display:"none"};function Re(e){let{id:t,value:n}=e;return r().createElement("div",{id:t,style:ke},n)}function De(e){let{id:t,announcement:n,ariaLiveType:o="assertive"}=e;return r().createElement("div",{id:t,style:{position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":o,"aria-atomic":!0},n)}const Ie=(0,t.createContext)(null),_e={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},Ne={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Oe(e){let{announcements:n=Ne,container:o,hiddenTextDescribedById:i,screenReaderInstructions:a=_e}=e;const{announce:l,announcement:s}=function(){const[e,n]=(0,t.useState)("");return{announce:(0,t.useCallback)((e=>{null!=e&&n(e)}),[]),announcement:e}}(),c=me("DndLiveRegion"),[u,d]=(0,t.useState)(!1);if((0,t.useEffect)((()=>{d(!0)}),[]),function(e){const n=(0,t.useContext)(Ie);(0,t.useEffect)((()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)}),[e,n])}((0,t.useMemo)((()=>({onDragStart(e){let{active:t}=e;l(n.onDragStart({active:t}))},onDragMove(e){let{active:t,over:r}=e;n.onDragMove&&l(n.onDragMove({active:t,over:r}))},onDragOver(e){let{active:t,over:r}=e;l(n.onDragOver({active:t,over:r}))},onDragEnd(e){let{active:t,over:r}=e;l(n.onDragEnd({active:t,over:r}))},onDragCancel(e){let{active:t,over:r}=e;l(n.onDragCancel({active:t,over:r}))}})),[l,n])),!u)return null;const f=r().createElement(r().Fragment,null,r().createElement(Re,{id:i,value:a.draggable}),r().createElement(De,{id:c,announcement:s}));return o?(0,ee.createPortal)(f,o):f}var Be;function Te(){}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(Be||(Be={}));const Me=Object.freeze({x:0,y:0});function Le(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Ae(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=o-r,l=i-n;if(r<o&&n<i){const n=t.width*t.height,r=e.width*e.height,o=a*l;return Number((o/(n+r-o)).toFixed(4))}return 0}const Pe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const e of r){const{id:r}=e,i=n.get(r);if(i){const n=Ae(i,t);n>0&&o.push({id:r,data:{droppableContainer:e,value:n}})}}return o.sort(Le)};function je(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Me}function Fe(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce(((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x})),{...t})}}const ze=Fe(1);const Ve={ignoreTransform:!1};function He(e,t){void 0===t&&(t=Ve);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=oe(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=function(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!r)return e;const{scaleX:o,scaleY:i,x:a,y:l}=r,s=e.left-a-(1-o)*parseFloat(n),c=e.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),u=o?e.width/o:e.width,d=i?e.height/i:e.height;return{width:u,height:d,top:c,right:s+u,bottom:c+d,left:s}}(n,t,r))}const{top:r,left:o,width:i,height:a,bottom:l,right:s}=n;return{top:r,left:o,width:i,height:a,bottom:l,right:s}}function Ue(e){return He(e,{ignoreTransform:!0})}function Ke(e,t){const n=[];return e?function r(o){if(null!=t&&n.length>=t)return n;if(!o)return n;if(ie(o)&&null!=o.scrollingElement&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!ae(o)||le(o))return n;if(n.includes(o))return n;const i=oe(e).getComputedStyle(o);return o!==e&&function(e,t){void 0===t&&(t=oe(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const r=t[e];return"string"==typeof r&&n.test(r)}))}(o,i)&&n.push(o),function(e,t){return void 0===t&&(t=oe(e).getComputedStyle(e)),"fixed"===t.position}(o,i)?n:r(o.parentNode)}(e):n}function We(e){const[t]=Ke(e,1);return null!=t?t:null}function $e(e){return te&&e?ne(e)?e:re(e)?ie(e)||e===se(e).scrollingElement?window:ae(e)?e:null:null:null}function Ye(e){return ne(e)?e.scrollX:e.scrollLeft}function Ge(e){return ne(e)?e.scrollY:e.scrollTop}function Xe(e){return{x:Ye(e),y:Ge(e)}}var qe;function Ze(e){return!(!te||!e)&&e===document.scrollingElement}function Je(e){const t={x:0,y:0},n=Ze(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(qe||(qe={}));const Qe={x:.2,y:.2};function et(e,t,n,r,o){let{top:i,left:a,right:l,bottom:s}=n;void 0===r&&(r=10),void 0===o&&(o=Qe);const{isTop:c,isBottom:u,isLeft:d,isRight:f}=Je(e),p={x:0,y:0},h={x:0,y:0},v=t.height*o.y,m=t.width*o.x;return!c&&i<=t.top+v?(p.y=qe.Backward,h.y=r*Math.abs((t.top+v-i)/v)):!u&&s>=t.bottom-v&&(p.y=qe.Forward,h.y=r*Math.abs((t.bottom-v-s)/v)),!f&&l>=t.right-m?(p.x=qe.Forward,h.x=r*Math.abs((t.right-m-l)/m)):!d&&a<=t.left+m&&(p.x=qe.Backward,h.x=r*Math.abs((t.left+m-a)/m)),{direction:p,speed:h}}function tt(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function nt(e){return e.reduce(((e,t)=>be(e,Xe(t))),Me)}const rt=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+Ye(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+Ge(t)),0)}]];class ot{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Ke(t),r=nt(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[e,t,o]of rt)for(const i of t)Object.defineProperty(this,i,{get:()=>{const t=o(n),a=r[e]-t;return this.rect[i]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class it{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function at(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var lt,st,ct;function ut(e){e.preventDefault()}function dt(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(lt||(lt={})),(ct=st||(st={})).Space="Space",ct.Down="ArrowDown",ct.Right="ArrowRight",ct.Left="ArrowLeft",ct.Up="ArrowUp",ct.Esc="Escape",ct.Enter="Enter";const ft={start:[st.Space,st.Enter],cancel:[st.Esc],end:[st.Space,st.Enter]},pt=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case st.Right:return{...n,x:n.x+25};case st.Left:return{...n,x:n.x-25};case st.Down:return{...n,y:n.y+25};case st.Up:return{...n,y:n.y-25}}};class ht{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new it(se(t)),this.windowListeners=new it(oe(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(lt.Resize,this.handleCancel),this.windowListeners.add(lt.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(lt.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&function(e,t){if(void 0===t&&(t=He),!e)return;const{top:n,left:r,bottom:o,right:i}=t(e);We(e)&&(o<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(n),t(Me)}handleKeyDown(e){if(we(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:o=ft,coordinateGetter:i=pt,scrollBehavior:a="smooth"}=r,{code:l}=e;if(o.end.includes(l))return void this.handleEnd(e);if(o.cancel.includes(l))return void this.handleCancel(e);const{collisionRect:s}=n.current,c=s?{x:s.left,y:s.top}:Me;this.referenceCoordinates||(this.referenceCoordinates=c);const u=i(e,{active:t,context:n.current,currentCoordinates:c});if(u){const t=ye(u,c),r={x:0,y:0},{scrollableAncestors:o}=n.current;for(const n of o){const o=e.code,{isTop:i,isRight:l,isLeft:s,isBottom:c,maxScroll:d,minScroll:f}=Je(n),p=tt(n),h={x:Math.min(o===st.Right?p.right-p.width/2:p.right,Math.max(o===st.Right?p.left:p.left+p.width/2,u.x)),y:Math.min(o===st.Down?p.bottom-p.height/2:p.bottom,Math.max(o===st.Down?p.top:p.top+p.height/2,u.y))},v=o===st.Right&&!l||o===st.Left&&!s,m=o===st.Down&&!c||o===st.Up&&!i;if(v&&h.x!==u.x){const e=n.scrollLeft+t.x,i=o===st.Right&&e<=d.x||o===st.Left&&e>=f.x;if(i&&!t.y)return void n.scrollTo({left:e,behavior:a});r.x=i?n.scrollLeft-e:o===st.Right?n.scrollLeft-d.x:n.scrollLeft-f.x,r.x&&n.scrollBy({left:-r.x,behavior:a});break}if(m&&h.y!==u.y){const e=n.scrollTop+t.y,i=o===st.Down&&e<=d.y||o===st.Up&&e>=f.y;if(i&&!t.x)return void n.scrollTo({top:e,behavior:a});r.y=i?n.scrollTop-e:o===st.Down?n.scrollTop-d.y:n.scrollTop-f.y,r.y&&n.scrollBy({top:-r.y,behavior:a});break}}this.handleMove(e,be(ye(u,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function vt(e){return Boolean(e&&"distance"in e)}function mt(e){return Boolean(e&&"delay"in e)}ht.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=ft,onActivation:o}=t,{active:i}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const t=i.activatorNode.current;return!(t&&e.target!==t||(e.preventDefault(),null==o||o({event:e.nativeEvent}),0))}return!1}}];class gt{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=oe(e);return e instanceof t?e:se(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:i}=o;this.props=e,this.events=t,this.document=se(i),this.documentListeners=new it(this.document),this.listeners=new it(n),this.windowListeners=new it(oe(i)),this.initialCoordinates=null!=(r=Ee(o))?r:Me,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(lt.Resize,this.handleCancel),this.windowListeners.add(lt.DragStart,ut),this.windowListeners.add(lt.VisibilityChange,this.handleCancel),this.windowListeners.add(lt.ContextMenu,ut),this.documentListeners.add(lt.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(mt(t))return void(this.timeoutId=setTimeout(this.handleStart,t.delay));if(vt(t))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(lt.Click,dt,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(lt.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:o}=this,{onMove:i,options:{activationConstraint:a}}=o;if(!r)return;const l=null!=(t=Ee(e))?t:Me,s=ye(r,l);if(!n&&a){if(vt(a)){if(null!=a.tolerance&&at(s,a.tolerance))return this.handleCancel();if(at(s,a.distance))return this.handleStart()}return mt(a)&&at(s,a.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),i(l)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===st.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const bt={move:{name:"pointermove"},end:{name:"pointerup"}};class yt extends gt{constructor(e){const{event:t}=e,n=se(t.target);super(e,bt,n)}}yt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button||(null==r||r({event:n}),0))}}];const wt={move:{name:"mousemove"},end:{name:"mouseup"}};var Et;!function(e){e[e.RightClick=2]="RightClick"}(Et||(Et={})),class extends gt{constructor(e){super(e,wt,se(e.event.target))}}.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==Et.RightClick&&(null==r||r({event:n}),!0)}}];const Ct={move:{name:"touchmove"},end:{name:"touchend"}};var xt,St;(class extends gt{constructor(e){super(e,Ct)}static setup(){return window.addEventListener(Ct.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Ct.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return!(o.length>1||(null==r||r({event:n}),0))}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(xt||(xt={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(St||(St={}));const kt={x:{[qe.Backward]:!1,[qe.Forward]:!1},y:{[qe.Backward]:!1,[qe.Forward]:!1}};var Rt,Dt;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(Rt||(Rt={})),function(e){e.Optimized="optimized"}(Dt||(Dt={}));const It=new Map;function _t(e,t){return fe((n=>e?n||("function"==typeof t?t(e):e):null),[t,e])}function Nt(e){let{callback:n,disabled:r}=e;const o=ue(n),i=(0,t.useMemo)((()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(o)}),[r]);return(0,t.useEffect)((()=>()=>null==i?void 0:i.disconnect()),[i]),i}function Ot(e){return new ot(He(e),e)}function Bt(e,n,r){void 0===n&&(n=Ot);const[o,i]=(0,t.useReducer)((function(t){if(!e)return null;var o;if(!1===e.isConnected)return null!=(o=null!=t?t:r)?o:null;const i=n(e);return JSON.stringify(t)===JSON.stringify(i)?t:i}),null),a=function(e){let{callback:n,disabled:r}=e;const o=ue(n),i=(0,t.useMemo)((()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(o)}),[o,r]);return(0,t.useEffect)((()=>()=>null==i?void 0:i.disconnect()),[i]),i}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){i();break}}}}),l=Nt({callback:i});return ce((()=>{i(),e?(null==l||l.observe(e),null==a||a.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==a||a.disconnect())}),[e]),o}const Tt=[];function Mt(e,n){void 0===n&&(n=[]);const r=(0,t.useRef)(null);return(0,t.useEffect)((()=>{r.current=null}),n),(0,t.useEffect)((()=>{const t=e!==Me;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)}),[e]),r.current?ye(e,r.current):Me}function Lt(e){return(0,t.useMemo)((()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null),[e])}const At=[];const Pt=[{sensor:yt,options:{}},{sensor:ht,options:{}}],jt={current:{}},Ft={draggable:{measure:Ue},droppable:{measure:Ue,strategy:Rt.WhileDragging,frequency:Dt.Optimized},dragOverlay:{measure:He}};class zt extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const Vt={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new zt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Te},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ft,measureDroppableContainers:Te,windowRect:null,measuringScheduled:!1},Ht={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Te,draggableNodes:new Map,over:null,measureDroppableContainers:Te},Ut=(0,t.createContext)(Ht),Kt=(0,t.createContext)(Vt);function Wt(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new zt}}}function $t(e,t){switch(t.type){case Be.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Be.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case Be.DragEnd:case Be.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Be.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new zt(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case Be.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new zt(e.droppable.containers);return a.set(n,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:a}}}case Be.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new zt(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Yt(e){let{disabled:n}=e;const{active:r,activatorEvent:o,draggableNodes:i}=(0,t.useContext)(Ut),a=he(o),l=he(null==r?void 0:r.id);return(0,t.useEffect)((()=>{if(!n&&!o&&a&&null!=l){if(!we(a))return;if(document.activeElement===a.target)return;const e=i.get(l);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=Se(e);if(t){t.focus();break}}}))}}),[o,n,i,l,a]),null}const Gt=(0,t.createContext)({...Me,scaleX:1,scaleY:1});var Xt;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(Xt||(Xt={}));const qt=(0,t.memo)((function(e){var n,o,i,a;let{id:l,accessibility:s,autoScroll:c=!0,children:u,sensors:d=Pt,collisionDetection:f=Pe,measuring:p,modifiers:h,...v}=e;const m=(0,t.useReducer)($t,void 0,Wt),[g,b]=m,[y,w]=function(){const[e]=(0,t.useState)((()=>new Set)),n=(0,t.useCallback)((t=>(e.add(t),()=>e.delete(t))),[e]);return[(0,t.useCallback)((t=>{let{type:n,event:r}=t;e.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)}))}),[e]),n]}(),[E,C]=(0,t.useState)(Xt.Uninitialized),x=E===Xt.Initialized,{draggable:{active:S,nodes:k,translate:R},droppable:{containers:D}}=g,I=S?k.get(S):null,_=(0,t.useRef)({initial:null,translated:null}),N=(0,t.useMemo)((()=>{var e;return null!=S?{id:S,data:null!=(e=null==I?void 0:I.data)?e:jt,rect:_}:null}),[S,I]),O=(0,t.useRef)(null),[B,T]=(0,t.useState)(null),[M,L]=(0,t.useState)(null),A=de(v,Object.values(v)),P=me("DndDescribedBy",l),j=(0,t.useMemo)((()=>D.getEnabled()),[D]),F=(z=p,(0,t.useMemo)((()=>({draggable:{...Ft.draggable,...null==z?void 0:z.draggable},droppable:{...Ft.droppable,...null==z?void 0:z.droppable},dragOverlay:{...Ft.dragOverlay,...null==z?void 0:z.dragOverlay}})),[null==z?void 0:z.draggable,null==z?void 0:z.droppable,null==z?void 0:z.dragOverlay]));var z;const{droppableRects:V,measureDroppableContainers:H,measuringScheduled:U}=function(e,n){let{dragging:r,dependencies:o,config:i}=n;const[a,l]=(0,t.useState)(null),{frequency:s,measure:c,strategy:u}=i,d=(0,t.useRef)(e),f=function(){switch(u){case Rt.Always:return!1;case Rt.BeforeDragging:return r;default:return!r}}(),p=de(f),h=(0,t.useCallback)((function(e){void 0===e&&(e=[]),p.current||l((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[p]),v=(0,t.useRef)(null),m=fe((t=>{if(f&&!r)return It;if(!t||t===It||d.current!==e||null!=a){const t=new Map;for(let n of e){if(!n)continue;if(a&&a.length>0&&!a.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new ot(c(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t}),[e,a,r,f,c]);return(0,t.useEffect)((()=>{d.current=e}),[e]),(0,t.useEffect)((()=>{f||h()}),[r,f]),(0,t.useEffect)((()=>{a&&a.length>0&&l(null)}),[JSON.stringify(a)]),(0,t.useEffect)((()=>{f||"number"!=typeof s||null!==v.current||(v.current=setTimeout((()=>{h(),v.current=null}),s))}),[s,f,h,...o]),{droppableRects:m,measureDroppableContainers:h,measuringScheduled:null!=a}}(j,{dragging:x,dependencies:[R.x,R.y],config:F.droppable}),K=function(e,t){const n=null!==t?e.get(t):void 0,r=n?n.node.current:null;return fe((e=>{var n;return null===t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(k,S),W=(0,t.useMemo)((()=>M?Ee(M):null),[M]),$=function(){const e=!1===(null==B?void 0:B.autoScrollEnabled),t="object"==typeof c?!1===c.enabled:!1===c,n=x&&!e&&!t;return"object"==typeof c?{...c,enabled:n}:{enabled:n}}(),Y=function(e,t){return _t(e,t)}(K,F.draggable.measure);!function(e){let{activeNode:n,measure:r,initialRect:o,config:i=!0}=e;const a=(0,t.useRef)(!1),{x:l,y:s}="boolean"==typeof i?{x:i,y:i}:i;ce((()=>{if(!l&&!s||!n)return void(a.current=!1);if(a.current||!o)return;const e=null==n?void 0:n.node.current;if(!e||!1===e.isConnected)return;const t=je(r(e),o);if(l||(t.x=0),s||(t.y=0),a.current=!0,Math.abs(t.x)>0||Math.abs(t.y)>0){const n=We(e);n&&n.scrollBy({top:t.y,left:t.x})}}),[n,l,s,o,r])}({activeNode:S?k.get(S):null,config:$.layoutShiftCompensation,initialRect:Y,measure:F.draggable.measure});const G=Bt(K,F.draggable.measure,Y),X=Bt(K?K.parentElement:null),q=(0,t.useRef)({activatorEvent:null,active:null,activeNode:K,collisionRect:null,collisions:null,droppableRects:V,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:D,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Z=D.getNodeFor(null==(n=q.current.over)?void 0:n.id),J=function(e){let{measure:n}=e;const[r,o]=(0,t.useState)(null),i=Nt({callback:(0,t.useCallback)((e=>{for(const{target:t}of e)if(ae(t)){o((e=>{const r=n(t);return e?{...e,width:r.width,height:r.height}:r}));break}}),[n])}),a=(0,t.useCallback)((e=>{const t=function(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return ae(t)?t:e}(e);null==i||i.disconnect(),t&&(null==i||i.observe(t)),o(t?n(t):null)}),[n,i]),[l,s]=pe(a);return(0,t.useMemo)((()=>({nodeRef:l,rect:r,setRef:s})),[r,l,s])}({measure:F.dragOverlay.measure}),Q=null!=(o=J.nodeRef.current)?o:K,ne=x?null!=(i=J.rect)?i:G:null,re=Boolean(J.nodeRef.current&&J.rect),ie=je(le=re?null:G,_t(le));var le;const se=Lt(Q?oe(Q):null),ue=function(e){const n=(0,t.useRef)(e),r=fe((t=>e?t&&t!==Tt&&e&&n.current&&e.parentNode===n.current.parentNode?t:Ke(e):Tt),[e]);return(0,t.useEffect)((()=>{n.current=e}),[e]),r}(x?null!=Z?Z:K:null),ve=function(e,n){void 0===n&&(n=He);const[r]=e,o=Lt(r?oe(r):null),[i,a]=(0,t.useReducer)((function(){return e.length?e.map((e=>Ze(e)?o:new ot(n(e),e))):At}),At),l=Nt({callback:a});return e.length>0&&i===At&&a(),ce((()=>{e.length?e.forEach((e=>null==l?void 0:l.observe(e))):(null==l||l.disconnect(),a())}),[e]),i}(ue),ge=function(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...r})),n):n}(h,{transform:{x:R.x-ie.x,y:R.y-ie.y,scaleX:1,scaleY:1},activatorEvent:M,active:N,activeNodeRect:G,containerNodeRect:X,draggingNodeRect:ne,over:q.current.over,overlayNodeRect:J.rect,scrollableAncestors:ue,scrollableAncestorRects:ve,windowRect:se}),ye=W?be(W,R):null,we=function(e){const[n,r]=(0,t.useState)(null),o=(0,t.useRef)(e),i=(0,t.useCallback)((e=>{const t=$e(e.target);t&&r((e=>e?(e.set(t,Xe(t)),new Map(e)):null))}),[]);return(0,t.useEffect)((()=>{const t=o.current;if(e!==t){n(t);const a=e.map((e=>{const t=$e(e);return t?(t.addEventListener("scroll",i,{passive:!0}),[t,Xe(t)]):null})).filter((e=>null!=e));r(a.length?new Map(a):null),o.current=e}return()=>{n(e),n(t)};function n(e){e.forEach((e=>{const t=$e(e);null==t||t.removeEventListener("scroll",i)}))}}),[i,e]),(0,t.useMemo)((()=>e.length?n?Array.from(n.values()).reduce(((e,t)=>be(e,t)),Me):nt(e):Me),[e,n])}(ue),Ce=Mt(we),xe=Mt(we,[G]),Se=be(ge,Ce),ke=ne?ze(ne,ge):null,Re=N&&ke?f({active:N,collisionRect:ke,droppableRects:V,droppableContainers:j,pointerCoordinates:ye}):null,De=function(e,t){if(!e||0===e.length)return null;const[n]=e;return n.id}(Re),[_e,Ne]=(0,t.useState)(null),Te=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(re?ge:be(ge,xe),null!=(a=null==_e?void 0:_e.rect)?a:null,G),Le=(0,t.useCallback)(((e,t)=>{let{sensor:n,options:r}=t;if(null==O.current)return;const o=k.get(O.current);if(!o)return;const i=e.nativeEvent,a=new n({active:O.current,activeNode:o,event:i,options:r,context:q,onStart(e){const t=O.current;if(null==t)return;const n=k.get(t);if(!n)return;const{onDragStart:r}=A.current,o={active:{id:t,data:n.data,rect:_}};(0,ee.unstable_batchedUpdates)((()=>{null==r||r(o),C(Xt.Initializing),b({type:Be.DragStart,initialCoordinates:e,active:t}),y({type:"onDragStart",event:o})}))},onMove(e){b({type:Be.DragMove,coordinates:e})},onEnd:l(Be.DragEnd),onCancel:l(Be.DragCancel)});function l(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:o}=q.current;let a=null;if(t&&o){const{cancelDrop:l}=A.current;a={activatorEvent:i,active:t,collisions:n,delta:o,over:r},e===Be.DragEnd&&"function"==typeof l&&await Promise.resolve(l(a))&&(e=Be.DragCancel)}O.current=null,(0,ee.unstable_batchedUpdates)((()=>{b({type:e}),C(Xt.Uninitialized),Ne(null),T(null),L(null);const t=e===Be.DragEnd?"onDragEnd":"onDragCancel";if(a){const e=A.current[t];null==e||e(a),y({type:t,event:a})}}))}}(0,ee.unstable_batchedUpdates)((()=>{T(a),L(e.nativeEvent)}))}),[k]),Ae=(0,t.useCallback)(((e,t)=>(n,r)=>{const o=n.nativeEvent,i=k.get(r);if(null!==O.current||!i||o.dndKit||o.defaultPrevented)return;const a={active:i};!0===e(n,t.options,a)&&(o.dndKit={capturedBy:t.sensor},O.current=r,Le(n,t))}),[k,Le]),Fe=function(e,n){return(0,t.useMemo)((()=>e.reduce(((e,t)=>{const{sensor:r}=t;return[...e,...r.activators.map((e=>({eventName:e.eventName,handler:n(e.handler,t)})))]}),[])),[e,n])}(d,Ae);!function(e){(0,t.useEffect)((()=>{if(!te)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(d),ce((()=>{G&&E===Xt.Initializing&&C(Xt.Initialized)}),[G,E]),(0,t.useEffect)((()=>{const{onDragMove:e}=A.current,{active:t,activatorEvent:n,collisions:r,over:o}=q.current;if(!t||!n)return;const i={active:t,activatorEvent:n,collisions:r,delta:{x:Se.x,y:Se.y},over:o};(0,ee.unstable_batchedUpdates)((()=>{null==e||e(i),y({type:"onDragMove",event:i})}))}),[Se.x,Se.y]),(0,t.useEffect)((()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:o}=q.current;if(!e||null==O.current||!t||!o)return;const{onDragOver:i}=A.current,a=r.get(De),l=a&&a.rect.current?{id:a.id,rect:a.rect.current,data:a.data,disabled:a.disabled}:null,s={active:e,activatorEvent:t,collisions:n,delta:{x:o.x,y:o.y},over:l};(0,ee.unstable_batchedUpdates)((()=>{Ne(l),null==i||i(s),y({type:"onDragOver",event:s})}))}),[De]),ce((()=>{q.current={activatorEvent:M,active:N,activeNode:K,collisionRect:ke,collisions:Re,droppableRects:V,draggableNodes:k,draggingNode:Q,draggingNodeRect:ne,droppableContainers:D,over:_e,scrollableAncestors:ue,scrollAdjustedTranslate:Se},_.current={initial:ne,translated:ke}}),[N,K,Re,ke,k,Q,ne,V,D,_e,ue,Se]),function(e){let{acceleration:n,activator:r=xt.Pointer,canScroll:o,draggingRect:i,enabled:a,interval:l=5,order:s=St.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:p}=e;const h=function(e){let{delta:t,disabled:n}=e;const r=he(t);return fe((e=>{if(n||!r||!e)return kt;const o=Math.sign(t.x-r.x),i=Math.sign(t.y-r.y);return{x:{[qe.Backward]:e.x[qe.Backward]||-1===o,[qe.Forward]:e.x[qe.Forward]||1===o},y:{[qe.Backward]:e.y[qe.Backward]||-1===i,[qe.Forward]:e.y[qe.Forward]||1===i}}}),[n,t,r])}({delta:f,disabled:!a}),[v,m]=function(){const e=(0,t.useRef)(null);return[(0,t.useCallback)(((t,n)=>{e.current=setInterval(t,n)}),[]),(0,t.useCallback)((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),g=(0,t.useRef)({x:0,y:0}),b=(0,t.useRef)({x:0,y:0}),y=(0,t.useMemo)((()=>{switch(r){case xt.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case xt.DraggableRect:return i}}),[r,i,c]),w=(0,t.useRef)(null),E=(0,t.useCallback)((()=>{const e=w.current;if(!e)return;const t=g.current.x*b.current.x,n=g.current.y*b.current.y;e.scrollBy(t,n)}),[]),C=(0,t.useMemo)((()=>s===St.TreeOrder?[...u].reverse():u),[s,u]);(0,t.useEffect)((()=>{if(a&&u.length&&y){for(const e of C){if(!1===(null==o?void 0:o(e)))continue;const t=u.indexOf(e),r=d[t];if(!r)continue;const{direction:i,speed:a}=et(e,r,y,n,p);for(const e of["x","y"])h[e][i[e]]||(a[e]=0,i[e]=0);if(a.x>0||a.y>0)return m(),w.current=e,v(E,l),g.current=a,void(b.current=i)}g.current={x:0,y:0},b.current={x:0,y:0},m()}else m()}),[n,E,o,m,a,l,JSON.stringify(y),JSON.stringify(h),v,u,C,d,JSON.stringify(p)])}({...$,delta:R,draggingRect:ke,pointerCoordinates:ye,scrollableAncestors:ue,scrollableAncestorRects:ve});const Ve=(0,t.useMemo)((()=>({active:N,activeNode:K,activeNodeRect:G,activatorEvent:M,collisions:Re,containerNodeRect:X,dragOverlay:J,draggableNodes:k,droppableContainers:D,droppableRects:V,over:_e,measureDroppableContainers:H,scrollableAncestors:ue,scrollableAncestorRects:ve,measuringConfiguration:F,measuringScheduled:U,windowRect:se})),[N,K,G,M,Re,X,J,k,D,V,_e,H,ue,ve,F,U,se]),Ue=(0,t.useMemo)((()=>({activatorEvent:M,activators:Fe,active:N,activeNodeRect:G,ariaDescribedById:{draggable:P},dispatch:b,draggableNodes:k,over:_e,measureDroppableContainers:H})),[M,Fe,N,G,b,P,k,_e,H]);return r().createElement(Ie.Provider,{value:w},r().createElement(Ut.Provider,{value:Ue},r().createElement(Kt.Provider,{value:Ve},r().createElement(Gt.Provider,{value:Te},u)),r().createElement(Yt,{disabled:!1===(null==s?void 0:s.restoreFocus)})),r().createElement(Oe,{...s,hiddenTextDescribedById:P}))})),Zt=(0,t.createContext)(null),Jt="button",Qt="Droppable";const en="Droppable",tn={timeout:25};function nn(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function rn(e,t){return e.reduce(((e,n,r)=>{const o=t.get(n);return o&&(e[r]=o),e}),Array(e.length))}function on(e){return null!==e&&e>=0}const an=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const i=nn(t,r,n),a=t[o],l=i[o];return l&&a?{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}:null},ln="Sortable",sn=r().createContext({activeIndex:-1,containerId:ln,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:an,disabled:{draggable:!1,droppable:!1}});function cn(e){let{children:n,id:o,items:i,strategy:a=an,disabled:l=!1}=e;const{active:s,dragOverlay:c,droppableRects:u,over:d,measureDroppableContainers:f}=(0,t.useContext)(Kt),p=me(ln,o),h=Boolean(null!==c.rect),v=(0,t.useMemo)((()=>i.map((e=>"object"==typeof e&&"id"in e?e.id:e))),[i]),m=null!=s,g=s?v.indexOf(s.id):-1,b=d?v.indexOf(d.id):-1,y=(0,t.useRef)(v),w=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(v,y.current),E=-1!==b&&-1===g||w,C=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(l);ce((()=>{w&&m&&f(v)}),[w,v,m,f]),(0,t.useEffect)((()=>{y.current=v}),[v]);const x=(0,t.useMemo)((()=>({activeIndex:g,containerId:p,disabled:C,disableTransforms:E,items:v,overIndex:b,useDragOverlay:h,sortedRects:rn(v,u),strategy:a})),[g,p,C.draggable,C.droppable,E,v,b,u,h,a]);return r().createElement(sn.Provider,{value:x},n)}const un=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return nn(n,r,o).indexOf(t)},dn=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:i,newIndex:a,previousItems:l,previousContainerId:s,transition:c}=e;return!(!c||!r||l!==i&&o===a||!n&&(a===o||t!==s))},fn={duration:200,easing:"ease"},pn="transform",hn=Ce.Transition.toString({property:pn,duration:0,easing:"linear"}),vn={roleDescription:"sortable"};function mn(e){let{animateLayoutChanges:n=dn,attributes:r,disabled:o,data:i,getNewIndex:a=un,id:l,strategy:s,resizeObserverConfig:c,transition:u=fn}=e;const{items:d,containerId:f,activeIndex:p,disabled:h,disableTransforms:v,sortedRects:m,overIndex:g,useDragOverlay:b,strategy:y}=(0,t.useContext)(sn),w=function(e,t){var n,r;return"boolean"==typeof e?{draggable:e,droppable:!1}:{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(o,h),E=d.indexOf(l),C=(0,t.useMemo)((()=>({sortable:{containerId:f,index:E,items:d},...i})),[f,i,E,d]),x=(0,t.useMemo)((()=>d.slice(d.indexOf(l))),[d,l]),{rect:S,node:k,isOver:R,setNodeRef:D}=function(e){let{data:n,disabled:r=!1,id:o,resizeObserverConfig:i}=e;const a=me(en),{active:l,dispatch:s,over:c,measureDroppableContainers:u}=(0,t.useContext)(Ut),d=(0,t.useRef)({disabled:r}),f=(0,t.useRef)(!1),p=(0,t.useRef)(null),h=(0,t.useRef)(null),{disabled:v,updateMeasurementsFor:m,timeout:g}={...tn,...i},b=de(null!=m?m:o),y=Nt({callback:(0,t.useCallback)((()=>{f.current?(null!=h.current&&clearTimeout(h.current),h.current=setTimeout((()=>{u(Array.isArray(b.current)?b.current:[b.current]),h.current=null}),g)):f.current=!0}),[g]),disabled:v||!l}),w=(0,t.useCallback)(((e,t)=>{y&&(t&&(y.unobserve(t),f.current=!1),e&&y.observe(e))}),[y]),[E,C]=pe(w),x=de(n);return(0,t.useEffect)((()=>{y&&E.current&&(y.disconnect(),f.current=!1,y.observe(E.current))}),[E,y]),ce((()=>(s({type:Be.RegisterDroppable,element:{id:o,key:a,disabled:r,node:E,rect:p,data:x}}),()=>s({type:Be.UnregisterDroppable,key:a,id:o}))),[o]),(0,t.useEffect)((()=>{r!==d.current.disabled&&(s({type:Be.SetDroppableDisabled,id:o,key:a,disabled:r}),d.current.disabled=r)}),[o,a,r,s]),{active:l,rect:p,isOver:(null==c?void 0:c.id)===o,node:E,over:c,setNodeRef:C}}({id:l,data:C,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:x,...c}}),{active:I,activatorEvent:_,activeNodeRect:N,attributes:O,setNodeRef:B,listeners:T,isDragging:M,over:L,setActivatorNodeRef:A,transform:P}=function(e){let{id:n,data:r,disabled:o=!1,attributes:i}=e;const a=me(Qt),{activators:l,activatorEvent:s,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:p}=(0,t.useContext)(Ut),{role:h=Jt,roleDescription:v="draggable",tabIndex:m=0}=null!=i?i:{},g=(null==c?void 0:c.id)===n,b=(0,t.useContext)(g?Gt:Zt),[y,w]=pe(),[E,C]=pe(),x=function(e,n){return(0,t.useMemo)((()=>e.reduce(((e,t)=>{let{eventName:r,handler:o}=t;return e[r]=e=>{o(e,n)},e}),{})),[e,n])}(l,n),S=de(r);return ce((()=>(f.set(n,{id:n,key:a,node:y,activatorNode:E,data:S}),()=>{const e=f.get(n);e&&e.key===a&&f.delete(n)})),[f,n]),{active:c,activatorEvent:s,activeNodeRect:u,attributes:(0,t.useMemo)((()=>({role:h,tabIndex:m,"aria-disabled":o,"aria-pressed":!(!g||h!==Jt)||void 0,"aria-roledescription":v,"aria-describedby":d.draggable})),[o,h,m,g,v,d.draggable]),isDragging:g,listeners:o?void 0:x,node:y,over:p,setNodeRef:w,setActivatorNodeRef:C,transform:b}}({id:l,data:C,attributes:{...vn,...r},disabled:w.draggable}),j=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,t.useMemo)((()=>e=>{n.forEach((t=>t(e)))}),n)}(D,B),F=Boolean(I),z=F&&!v&&on(p)&&on(g),V=!b&&M,H=V&&z?P:null,U=z?null!=H?H:(null!=s?s:y)({rects:m,activeNodeRect:N,activeIndex:p,overIndex:g,index:E}):null,K=on(p)&&on(g)?a({id:l,items:d,activeIndex:p,overIndex:g}):E,W=null==I?void 0:I.id,$=(0,t.useRef)({activeId:W,items:d,newIndex:K,containerId:f}),Y=d!==$.current.items,G=n({active:I,containerId:f,isDragging:M,isSorting:F,id:l,index:E,items:d,newIndex:$.current.newIndex,previousItems:$.current.items,previousContainerId:$.current.containerId,transition:u,wasDragging:null!=$.current.activeId}),X=function(e){let{disabled:n,index:r,node:o,rect:i}=e;const[a,l]=(0,t.useState)(null),s=(0,t.useRef)(r);return ce((()=>{if(!n&&r!==s.current&&o.current){const e=i.current;if(e){const t=He(o.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&l(n)}}r!==s.current&&(s.current=r)}),[n,r,o,i]),(0,t.useEffect)((()=>{a&&l(null)}),[a]),a}({disabled:!G,index:E,node:k,rect:S});return(0,t.useEffect)((()=>{F&&$.current.newIndex!==K&&($.current.newIndex=K),f!==$.current.containerId&&($.current.containerId=f),d!==$.current.items&&($.current.items=d)}),[F,K,f,d]),(0,t.useEffect)((()=>{if(W===$.current.activeId)return;if(W&&!$.current.activeId)return void($.current.activeId=W);const e=setTimeout((()=>{$.current.activeId=W}),50);return()=>clearTimeout(e)}),[W]),{active:I,activeIndex:p,attributes:O,data:C,rect:S,index:E,newIndex:K,items:d,isOver:R,isSorting:F,isDragging:M,listeners:T,node:k,overIndex:g,over:L,setNodeRef:j,setActivatorNodeRef:A,setDroppableNodeRef:D,setDraggableNodeRef:B,transform:null!=X?X:U,transition:X||Y&&$.current.newIndex===E?hn:V&&!we(_)||!u?void 0:F||G?Ce.Transition.toString({...u,property:pn}):void 0}}function gn({field:e,setAttributes:n,fieldName:r,attributes:o,editProps:a}){const l=e=>{const t=[...o[r]];t.splice(e,1),n({[r]:t})},s=e=>{const t=[...o[r]],i={...o[r][e],fastBlockId:(new Date).valueOf()};t.splice(e,0,i),n({[r]:t})},u=e=>e===o[r].length-1,d=e=>0===e,f=e=>{if(d(e))return;const t=[...o[r]],i=t[e];t[e]=t[e-1],t[e-1]=i,n({[r]:t})},p=e=>{if(u(e))return;const t=[...o[r]],i=t[e];t[e]=t[e+1],t[e+1]=i,n({[r]:t})};return(0,t.createElement)(i.BaseControl,{label:e.label,className:"fbl_repeater-inputs"},(0,t.createElement)("div",{className:"fbl_repeater-inputs__inner"},(0,t.createElement)(qt,{onDragEnd:({active:e,over:t})=>{if(t&&e.id!==t?.id){const a=o[r].findIndex((({fastBlockId:t})=>t===e.id)),l=o[r].findIndex((({fastBlockId:e})=>e===t.id));i=nn(o[r],a,l),n({[r]:i})}var i}},(0,t.createElement)(cn,{items:o[r].map((e=>e.fastBlockId))},o[r].map(((n,o)=>{const i={attribute:n,fieldName:r,index:o,field:e,moveUp:f,isFirst:d,moveDown:p,isLast:u,removeItem:l,duplicateItem:s,editProps:a};return(0,t.createElement)(bn,{key:n.fastBlockId?`${r}_${n.fastBlockId}`:`${r}_${o}`,...i})})))),(!e.limit||e.limit>o[r].length)&&(0,t.createElement)(i.Button,{className:"fbl_repeater-inputs__appender",icon:G,onClick:()=>{const t={};Object.entries(e.query).forEach((([e,n])=>{t[e]=n.default})),t.fastBlockId=(new Date).valueOf(),n({[r]:[...o[r],t]})},style:{width:"100%",justifyContent:"center",height:48},variant:"secondary","aria-label":(0,c.__)("Add Item")})))}function bn({attribute:e,fieldName:n,index:r,field:o,moveUp:a,isFirst:l,moveDown:u,isLast:d,removeItem:f,duplicateItem:p,editProps:v}){const{attributes:m,listeners:g,setNodeRef:b,transform:y,transition:w}=mn({id:e.fastBlockId}),E={transform:Ce.Translate.toString(y),transition:w},[C,x]=(0,s.useState)(!1);return(0,t.createElement)(i.Card,{ref:b,style:E},(0,t.createElement)("div",{className:"fbl_repeater-card__header",onClick:()=>{x(!C)}},(0,t.createElement)(X,{icon:q,className:"fbl_repeater-card__drag-handle",...m,...g}),(0,t.createElement)("div",{className:"fbl_repeater-card__title"},(0,t.createElement)("div",null,o.single?`${o.single} ${r+1}`:`Repeater ${(0,c.__)("Item")} ${r+1}`),(0,t.createElement)("div",{className:"fbl_repeater-card__desc"},(()=>{const t=Object.values(e)?.[0];return"string"==typeof t?t:""})())),(0,t.createElement)("div",{style:{display:"flex",marginLeft:"auto",alignItems:"center"}},C&&(0,t.createElement)("div",{style:{display:"flex",flexDirection:"column"}},(0,t.createElement)(i.Button,{onClick:e=>{e.stopPropagation(),a(r)},disabled:l(r),icon:Z,style:{height:18}}),(0,t.createElement)(i.Button,{onClick:e=>{e.stopPropagation(),u(r)},disabled:d(r),icon:J,style:{height:18}})),(0,t.createElement)(i.Button,{size:"small",onClick:e=>{e.stopPropagation(),f(r)},icon:h}),(0,t.createElement)(i.Button,{size:"small",onClick:e=>{e.stopPropagation(),p(r)},icon:Q}),(0,t.createElement)(i.Button,{icon:C?Z:J,onClick:()=>{x(!C)}}))),C&&(0,t.createElement)(i.CardBody,{initialOpen:!1},Object.entries(o.query).map((([e])=>{if(o.query[e]){const i={editProps:v,fieldName:n,field:o,subFieldName:e,subField:o.query[e],indexKey:r};return(0,t.createElement)(Y,{...i})}}))))}function yn({editProps:e,fieldName:n,field:r}){const{attributes:a,setAttributes:l}=e,s=e=>{l({[n]:e})},c=()=>{s(void 0)};if("repeater"===r.input){const o={field:r,setAttributes:l,fieldName:n,attributes:a,editProps:e};return(0,t.createElement)(gn,{...o})}return(0,t.createElement)(t.Fragment,null,(()=>{const e=W[r.input],l=()=>(0,t.createElement)(e,{setFieldAttributes:s,removeFieldAttributes:c,field:r,label:r.label,value:a[n]});if(void 0===e)return r.input&&console.error(r.input+" Input does not exist inside field "+n),null;const u=r.width||1;return"inspector"===r.location?(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(i.PanelBody,null,l())):(0,t.createElement)($,{width:u},l())})())}st.Down,st.Right,st.Up,st.Left;const wn=(0,f.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,f.jsx)(d.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})});function En({title:e,fields:n,editProps:r,isSelected:o}){const[a,l]=(0,s.useState)(!1),c=()=>{l((()=>!1))},u=o?" is-selected":"";return(0,t.createElement)("div",{className:"fbl_edit-btn-overlay"+u},Object.entries(n).filter((([e,t])=>"inspector"===t.location)).map((([e,n])=>{const o={editProps:r,fieldName:e,field:n};return(0,t.createElement)(yn,{...o})})),(0,t.createElement)(i.Button,{isPrimary:!0,icon:wn,onClick:()=>{l((()=>!0))}}),a&&(0,t.createElement)(i.Modal,{title:"Block: "+e,onRequestClose:c,style:{width:600},shouldCloseOnClickOutside:!1,overlayClassName:"fbl_edit-overlay"},Object.entries(n).filter((([e,t])=>"inspector"!==t.location)).map((([e,n])=>{const o={editProps:r,fieldName:e,field:n};return(0,t.createElement)(yn,{...o})})),(0,t.createElement)("div",{style:{textAlign:"right",marginTop:"2rem"}},(0,t.createElement)(i.Button,{isPrimary:!0,onClick:c},"Okay"))))}const Cn=(0,f.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,f.jsx)(d.Path,{d:"M19 8h-1V6h-5v2h-2V6H6v2H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zm.5 10c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5v-8c0-.3.2-.5.5-.5h14c.3 0 .5.2.5.5v8z"})}),xn=({children:e,fields:n})=>({attributes:r})=>e?(0,t.createElement)(o.InnerBlocks.Content,null):(0,t.createElement)("div",null,Object.entries(n).map((([e,n])=>{switch(n.input){case"text":case"textarea":if("string"==typeof n.selector){const o=n.selector;return(0,t.createElement)(o,null,r[e])}return(0,t.createElement)("p",null,r[e]);case"image":return(0,t.createElement)("img",{src:"object"==typeof r[e]&&r[e].url,alt:"object"==typeof r[e]&&r[e].alt});case"richText":return(0,t.createElement)(o.RichText.Content,{tagName:"p",value:r[e]});default:return null}}))),Sn=({attributes:e,children:t,fields:n,settings:r})=>[{attributes:e,...r,save:xn({children:t,fields:n}),apiVersion:1}];Object.values(fastBlockBlocks).forEach((n=>{!function(n){const{name:r,settings:a,children:c,allowTransformFrom:u}=n,d=n.fields||[],f={};for(const[e,t]of Object.entries(d)){const n={};n.type=t.type,n.default=t.default,f[e]=n}const p=function({settings:e,name:n,children:r,fields:a,editWidth:c,editView:u,childrenLimit:d,preview:f}){return p=>{const{attributes:h,isSelected:v,clientId:m}=p,[g,b]=(0,s.useState)(0),y=(0,o.useBlockProps)({style:{flexBasis:100*c+"%"}}),w=e&&e.title?e.title:n,E="popover"===u||"inspector"===u,C=(0,U.useSelect)((e=>e("core/block-editor").getBlock(m).innerBlocks)).length,x=(!d||C<d)&&o.InnerBlocks.ButtonBlockAppender;function S(e){return Object.entries(a).map((([n,r])=>{const o={editProps:e,fieldName:n,field:r,editView:u};return(0,t.createElement)(yn,{...o})}))}return(0,t.createElement)("div",{...y},(0,t.createElement)("div",{className:"fbl_editor-block",style:{minHeight:g},onMouseDown:e=>{if(v)return;e.currentTarget.style.minHeight=null;const t=e.currentTarget.offsetHeight;e.currentTarget.style.minHeight=t+"px",b(t)},onBlur:()=>{b(0)}},v&&!E||r||!1===f?(0,t.createElement)(i.Card,{className:"fbl_card",size:"small"},(0,t.createElement)(i.CardHeader,{className:"fbl_block-title"},(0,t.createElement)(X,{icon:Cn}),"Block: ",w),(0,t.createElement)(i.CardBody,{className:"fbl_card__body"},(0,t.createElement)("div",{className:"fbl_card__content-wrapper"},S(p)),r&&(0,t.createElement)("div",{className:"fbl_card__inner-blocks-wrapper"},(0,t.createElement)(o.InnerBlocks,{allowedBlocks:Array.isArray(r)?r:void 0,orientation:"horizontal",renderAppender:x})))):(0,t.createElement)("div",{style:{border:"1px dashed #ddd",padding:0,minHeight:50}},"popover"===u&&(0,t.createElement)(En,{title:w,fields:a,editProps:p,isSelected:v}),(0,t.createElement)("div",{className:"fbl_server-side-render"},(0,t.createElement)(l(),{block:n,attributes:{...h},httpMethod:"POST"})),v&&"inspector"===u&&(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(i.PanelBody,null,S(p))))))}}({fields:d,...n}),h=function({children:e,fields:n}){return({attributes:r,className:i})=>{const a=o.useBlockProps.save({className:i});return e?(0,t.createElement)(o.InnerBlocks.Content,null):(0,t.createElement)("div",{...a},Object.entries(n).map((([e,n])=>{switch(n.input){case"text":case"textarea":if("string"==typeof n.selector){const o=n.selector;return(0,t.createElement)(o,null,r[e])}return(0,t.createElement)("p",null,r[e]);case"image":return(0,t.createElement)("img",{src:"object"==typeof r[e]&&r[e].url,alt:"object"==typeof r[e]&&r[e].alt});case"richText":case"classicEditor":return(0,t.createElement)(o.RichText.Content,{value:r[e]});default:return null}})))}}({children:c,fields:d});u&&(a.transforms={from:[{type:"block",blocks:u,transform:(t,n)=>(0,e.createBlock)(r,t,n)}]});const v={apiVersion:2,edit:p,save:h,title:r,...a,attributes:f,deprecated:Sn({attributes:f,children:c,fields:d,settings:a})};(0,e.registerBlockType)(r,v)}(n)}))})()})();