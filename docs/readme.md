# Documentation Fast Blocks Wordpress Plugin

## Block Options:
- `name`: theme namespace with block-slug e.g. `my-theme/my-block`
- `template`: path to the block-template from the theme-directory e.g. `/blocks/template.php` if it is located in 'wp-content/themes/your-theme/blocks/template.php'
- `[settings]`: this is the basically the same settings object as in [`wp.blocks.registerBlockType()`](https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/) function. Note: `attributes`,`edit` and `save` will be generated by this plugin. 
- `[fields]`: all fields. fields always need a `type`, `input` and `default`. Optionally add a `label` and some specific input options.
- `[editView]`: `inspector` or `popover`.
- `[children]`: This enables nested blocks. Note: preview will be disabled.
- `[childrenLimit]`: Define a maximum for children blocks.
- `[editWidth]`: Define a width for the block preview (usefull for nested blocks). e.g. `6/12` or `.25`.
- `[preview]`: optionally set it to `false` if the ssr-preview makes any trouble and you just need the interface.
- `[allowTransformFrom]`: Array with similar blocks to transform from. Must have the same attributes to work properly. Example for inner blocks: `['core/group']`

## Available Field Inputs:
- `checkbox` (type: 'boolean')
- `toggle` (type: 'boolean')
- `text` (type: 'string') optionally set a `charLimit`
- `email` (type: 'string') 
- `textarea` (type: 'string') optionally set a `charLimit`
- `number` (type: 'string')
- `range` (type: 'number') you can also add `min`, `max` and `step`
- `select` (type: 'string' / 'number')
- `image` (type: 'object')
- `file` (type: 'object')
- `richText` (type: 'string') optionally set a `charLimit`
- `url` (type: 'string')
- `date` (type: 'string')
- `classicEditor` (type: 'string') This is actually a TinyMCE Component. Optionally set a `charLimit`
- `repeater` a more complex field with subfields. you can optionally `limit` these.

Fields always need a `type`, `input` and `default`.
To better understand the fields look at the following examples.

## Example inside `functions.php` of your theme:

```php
$options = [
  'name'      => 'some-slug/block-name',
  // template from theme-directory
  'template'  => '/blocks/test.php',
  'settings'  => [
    // same settings as the original "wp.registerBlockType" without attributes.
    'title'   => 'Plugin Block',
  ],
  'fields'    => [
    // define attributes and inputs/labels etc. that are needed.
    'headline'  => [
      'label'    => 'My Label',
      'type'     => 'string',
      'input'	   => 'text',
      'default'  => 'default string',
      'width' => 0.5, // optional for all fields except repeater
      // optional selector: useful fallback if dynamic rendering does not work. Also good for WP SEO PLugins.
      'selector' => 'h2',
    ],
    'text'  => [
      'label'    => 'Some Text',
      'type'     => 'string',
      'input'	   => 'richText',
      'default'  => 'default string',
      'charLimit' => 120 //optionallyy
    ],
    'image'   => [
      'label'   => 'Label for the Upload Button',
      'type'    => 'object',
      'input'   => 'image',
      'default' => [
        'url'   => 'image.jpeg',
        'alt'   => 'Alternative Text',
        'sizes' => []
      ]
    ],
    'bgColor' => [
      'label'   => 'Background',
      'type'    => 'string',
      'default' => 'light',
      'input'	  => 'select',
      'options' => [
        ['label' => 'light', 'value' => 'light'],
        ['label' => 'dark', 'value' => 'dark'],
      ]
    ],
    'someBool' => [
      // ...
      'type'    => 'boolean',
      'input'   => 'checkbox',
    ],
    'someArray' => [
      // ...
      'type' => 'array',
      'default' => [],
      'input' => 'repeater',
      'query' => [
        'subField1' => [
          'type' => 'string',
          'input' => 'text',
          'default' => 'default list item',
        ],
        'subField2' => [
          'type' => 'boolean',
          'input' => 'checkbox',
          'default' => true,
        ],
      ]
    ]
  ]
];

add_fast_block( $options );
```

## Example usage inside template:
use `$block->field('yourFieldName')` to echo the field directly. The field will will be sanitized with wp_kses_post()
use `$block->field_value('yourFieldName')` to get the value without echoing. Usefull for stored objects or arrays. You will have to sanitize on your own

```html
<div>
  <h2><?php $block->field('headline'); ?></h2>
  <img src="<?php echo $block->field_value('image')['url']; ?>"><!-- CAUTION: in production you should sanitize the value -->
</div>
```

# Example for a simple Row and Columns

```php 
add_fast_block([
  'name'          => 'bs/row',
  'template'      => '/blocks/row.php',
  'settings' => [
    'title' => 'Spalten',
    'supports' => [
      'color' => [
        'background' => true,
        'text' => false,
      ]
    ]
  ],
  'children'      => ['bs/col-3', 'bs/col-6'],
  'childrenLimit' => 6,
]);

add_fast_block([
  'name'      => 'bs/col-3',
  'template'  => '/blocks/col-3.php',
  'settings' => [
    'title' => 'Spalte Schmal',
    'parent' => ['bs/row']
  ],
  'children'  => true, // true means all are allowed
  'editWidth' => 4 / 12,
  'allowTransformFrom' => ['bs/col-6']
]);

// ...bs/col-6 would be more or less the same as bs/col-3
```

```html
<div class="row">
  <?php echo $children; ?>
</div>
```

```html
<div class="col-3">
  <?php echo $children; ?>
</div>
```